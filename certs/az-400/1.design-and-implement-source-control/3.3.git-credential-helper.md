# 🔑 **Git Credential Helpers Explained**

Git itself does **not** handle username/password/PAT storage.
Instead, it delegates to a **credential helper**.

You configure this in `.gitconfig`:

```ini
[credential]
    helper = manager   # or store, cache, etc.
```

---

## 📌 `.gitconfig`

- This is just Git’s **settings file** (per-user or per-repo).
- Think of it like **instructions**:

👉 “When Git needs credentials for `https://github.com`, use helper X.”

It doesn’t actually hold your passwords. It only tells Git which **helper plugin** to call.

---

## 📌 **Credential Helpers**

These are “plugins” Git can use.
Different helpers = different **storage backends** + **behavior**.

### 🔹 `store`

- Saves credentials in **plaintext file** (`~/.git-credentials` or `C:\Users\<you>\.git-credentials`).
- Example entry:

  ```ini
  https://alice:ghp_PAT123@github.com
  ```

- ✅ Simple, fast.
- ❌ Insecure (anyone with file access can read PATs).

Best for: test VMs, throwaway labs, very simple setups.

---

### 🔹 `cache` (Linux/macOS only)

- Stores credentials **in memory** for a few minutes.
- Example: keep token for 15 minutes after you type it.
- ❌ Doesn’t survive reboot.
- Rarely used on Windows.

---

### 🔹 `manager` (GCM — Git Credential Manager) ✅ **(default on Windows)**

- Secure storage (Windows Credential Manager, macOS Keychain, Linux libsecret).
- Supports **OAuth flows** (e.g., Azure DevOps, GitHub with browser login).
- Can also store PATs, encrypted in OS vault.
- Flexible: works per-repo, per-org (if `credential.useHttpPath=true`).

Example in Windows Credential Manager:

```ini
git:https://github.com/org1/repo1.git
→ username: alice
→ password: ghp_PAT123 (encrypted)
```

Best for: normal developers, corporate environments, multiple accounts.

---

## 📌 **Flow Inside Git**

When you run `git clone https://github.com/org/repo.git`:

<div align="center">

```mermaid
flowchart TD
    A[Git needs credentials] --> B[Check .gitconfig credential.helper]
    B -->|store| C[Look in ~/.git-credentials file]
    B -->|manager| D[Ask Git Credential Manager]
    D --> E[Credential Manager checks Windows Credential Vault]
    E -->|found| F[Return PAT/Token to Git]
    E -->|not found| G[Prompt user for login/PAT or OAuth browser]
    G --> H[Save token securely in Vault for next time]
```

</div>

---

## 📌 Example: Multi-Provider Setup

Your `.gitconfig` might look like:

```ini
[credential]
    helper = manager        # Default = secure GCM

[credential "https://github.com"]
    helper = store          # Force plaintext PATs for GitHub
    interactive = never

[credential "https://gitlab.com"]
    helper = store          # Same for GitLab

[credential "https://dev.azure.com"]
    helper = manager        # Use OAuth for Azure DevOps
```

👉 Now:

- GitHub → uses PATs from `~/.git-credentials`.
- GitLab → same.
- Azure DevOps → GCM pops browser/OAuth → saves in Windows vault.

---

## 📌 Key Difference (Manager vs Store)

| Feature                | `store`                             | `manager` (GCM)                     |
| ---------------------- | ----------------------------------- | ----------------------------------- |
| Storage location       | Plaintext file (`.git-credentials`) | Windows Credential Manager (secure) |
| Security               | ❌ Insecure (anyone can read)       | ✅ Encrypted with OS vault          |
| OAuth login (browser)  | ❌ Not supported                    | ✅ Supported                        |
| Multiple PATs per host | Needs `credential.useHttpPath`      | ✅ Works (with path scoping)        |
| Best suited for        | Quick labs, CI/CD inject PAT        | Day-to-day devs, enterprise use     |

---

## ✅ **TL;DR**

- `.gitconfig` = settings (what helper to use, by domain).
- `store` = plaintext file → insecure but simple.
- `manager` = Git Credential Manager → secure, supports OAuth + PATs, default on Windows.
- Rule of thumb: **Use manager for dev machines, store only for short-lived CI/CD or labs.**
