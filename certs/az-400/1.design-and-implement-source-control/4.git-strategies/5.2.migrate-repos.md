
# âš–ï¸ Bare vs Mirror in Git

## ğŸŸ¢ 1. Normal `git clone`

```bash
git clone https://github.com/org/repo.git
```

* âœ… You get a **working directory** with all project files.
* âœ… You can edit code, commit, run tests.
* âŒ Not ideal for **migration/backup** because it only fetches the default branch + tags.

---

## ğŸŸ  2. Bare Clone (`--bare`)

```bash
git clone --bare https://github.com/org/repo.git
```

* âŒ No working files (only `.git` database).
* âœ… Contains **all history, branches, tags** (the â€œmeatâ€ of the repo).
* âœ… Perfect for migration, backup, or hosting.
* âš ï¸ Does **not** auto-track every exotic ref type (like notes, refs/remotes/\*).

ğŸ‘‰ Think: **â€œRepo skeleton â€” all history, but no code to edit.â€**

---

## ğŸ”´ 3. Mirror Clone (`--mirror`)

```bash
git clone --mirror https://github.com/org/repo.git
```

* âŒ Also no working files (like `--bare`).
* âœ… Includes **everything `--bare` has PLUS**:

  * **All refs** (branches, tags, remote-tracking refs, notes).
  * Configures repo so `git fetch`/`git push --mirror` will keep **source and target identical**.

ğŸ‘‰ Think: **â€œExact twin â€” every ref, every change, auto-synced.â€**

---

## ğŸ”‘ Differences Summarized

| Feature                     | `--bare` âœ…                  | `--mirror` ğŸ”¥                  |
| --------------------------- | --------------------------- | ------------------------------ |
| Working files?              | âŒ No                        | âŒ No                           |
| All branches + tags?        | âœ… Yes                       | âœ… Yes                          |
| Remote-tracking refs, notes | âŒ Not all                   | âœ… Everything                   |
| Auto mirror config          | âŒ No                        | âœ… Yes                          |
| Common use                  | Hosting, backups, migration | Full repo replication, syncing |

---

## ğŸ› ï¸ When to Use Which?

* **Use `--bare` + `git push --mirror`**
  ğŸ‘‰ Standard migrations (GitHub â†’ Azure Repos)
  ğŸ‘‰ Backups where you only care about branches/tags/history

* **Use `--mirror`**
  ğŸ‘‰ When you must include **every single ref** (rare: Gerrit, custom Git servers, advanced workflows).
  ğŸ‘‰ When you need a **long-term mirror** repo that stays identical to the source.

---

## ğŸ“Œ Example: Migrating to Azure DevOps

<div align="center">
  <img src="image/5.mirror-vs-bar/1757502014030.png" alt="1757502014030" style="width: 80%; border-radius: 10px; border: 2px solid white;">
</div>

---

âœ… **Microsoft docs way (safe, common):**

```bash
git clone --bare https://github.com/contoso/old-repo.git
cd old-repo.git
git push --mirror https://dev.azure.com/contoso/project/_git/new-repo
```

ğŸ”¥ **Advanced mirroring way:**

```bash
git clone --mirror https://github.com/contoso/old-repo.git
cd old-repo.git
git push --mirror https://dev.azure.com/contoso/project/_git/new-repo
```

Both work â€” but Microsoft recommends `--bare` because itâ€™s simpler and enough for **99% of cases**.

---

## ğŸ¯ TL;DR

* Both **donâ€™t give you working files** (so you canâ€™t edit code).
* **`--bare`** = repo skeleton (branches + tags + history).
* **`--mirror`** = full twin (includes **all refs** + mirror config).
* For Azure DevOps migrations â†’ `clone --bare` + `push --mirror`.

---

ğŸ‘‰ So:

* Youâ€™ll never use `--mirror` daily as a developer.
* Youâ€™ll use `--bare` whenever you just want the repoâ€™s Git data (not files).
* Youâ€™ll use `--mirror` only if you need **exact replication**.
