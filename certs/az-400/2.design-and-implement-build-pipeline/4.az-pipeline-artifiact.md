# 📦 Azure DevOps Pipeline Artifacts

In Azure Pipelines, **artifacts** are the **output files** you want to pass between pipeline stages or share between builds and releases (like ZIPs, DLLs, logs, containers, reports… anything!).

---

<div align="center">
  <img src="images/az-pipeline-artifact.png" alt="Azure Pipeline artifact" style="width: 100%; border-radius: 10px;">
</div>

---

## 🔖 What Is an Artifact?

> **Artifact** is a fancy word for:
> **“Stuff your pipeline built and you don’t want to lose between stages.”**

It's how you move your **build output** (e.g. compiled code, test results, reports) from one stage to another — or even to a **Release pipeline**, a **deployment job**, or just **download later**.

---

## 🧱 Artifact Types

| Artifact Type | Description                                                             |
| ------------- | ----------------------------------------------------------------------- |
| `pipeline`    | Default artifact type — stored in Azure DevOps itself (secure, managed) |
| `filePath`    | AKA "File Share" artifact — stored in a UNC path (`\\server\folder`)    |

---

### ✅ 1. **Pipeline Artifact**

- Most common and recommended
- Saved inside Azure DevOps
- Downloadable across stages, jobs, or even other pipelines
- Secure, scalable, works in parallel builds

🧪 Example Use:

> Store build outputs (`DLL`, `.zip`, `.tar`) and use them in later deployment stages.

---

### 🗂️ 2. **File Share Artifact**

- Stored in a **UNC path** (e.g., `\\buildserver\shared\drop`)
- Used if you're working in **on-prem** or **legacy infrastructure**
- Must be reachable from the pipeline agent machine

🧪 Example Use:

> Save a `.msi` installer or `.exe` on a shared internal folder for legacy app distribution.

---

## 🚀 Using Artifacts in Azure Pipelines

### 🔧 Built-in Variable

```bash
$(Build.ArtifactStagingDirectory)
```

📁 This is where you place your files before publishing them as an artifact.

> Think of it as your **“output folder”** during the build.

---

### 🛠️ YAML: Publish Pipeline Artifact

```yaml
- task: PublishPipelineArtifacts@1
  inputs:
    targetPath: "$(Build.ArtifactStagingDirectory)"
    artifact: "drop"
    publishLocation: "pipeline"
```

📌 Breakdown:

- `targetPath`: Where your output files are (e.g. ZIPs, DLLs)
- `artifact`: Name of your artifact (e.g. “drop”)
- `publishLocation`: Always set to `'pipeline'` unless you’re doing something really weird

---

### 📥 Download Artifact Later

In another job or pipeline:

```yaml
- task: DownloadPipelineArtifact@2
  inputs:
    artifact: "drop"
    path: "$(Build.ArtifactStagingDirectory)"
```

💡 This makes it super easy to download and reuse outputs from earlier stages — great for **multi-stage CI/CD**!

---

## 🧪 File Share Artifact Example (Classic UI Only)

If you’re using **Classic Release Pipelines** and want to publish to a file share:

1. Go to the Release Pipeline
2. Add **Artifact**
3. Choose type → `File Share`
4. Provide UNC path: `\\myserver\buildoutput`
5. Make sure your agent can access the path

> 🔐 Usually used when you have **on-prem build servers** or **internal Windows shares**

---

## 🧠 Summary

| Concept                             | Use Case                                            |
| ----------------------------------- | --------------------------------------------------- |
| `Pipeline Artifact`                 | Modern, YAML-based, CI/CD friendly                  |
| `File Share Artifact`               | Legacy/Classic, internal infrastructure             |
| `$(Build.ArtifactStagingDirectory)` | Temporary location to place files before publishing |
| `PublishPipelineArtifacts`          | Task to publish your outputs                        |
| `DownloadPipelineArtifact`          | Reuse outputs later in jobs/stages                  |
