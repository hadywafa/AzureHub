# ğŸ–¥ï¸ **UI Testing with Selenium in Azure DevOps**

## ğŸ“Œ **What is UI Testing?**

ğŸ‘‰ **UI Testing** (a.k.a. end-to-end / functional testing) checks whether your applicationâ€™s **user interface works as expected** when a real user clicks, types, and navigates.

- **Unit Test** â†’ checks a function (backend).
- **Integration Test** â†’ checks components together (API â†” DB).
- **UI Test** â†’ checks **the app from the userâ€™s eyes** (browser automation).

ğŸ’¡ Example: Open login page â†’ type username/password â†’ click Login â†’ assert "Welcome John" appears.

---

<div align="center">
  <img src="image/4.ui-test/1753640863398.png" alt="1753640863398" style="border-radius: 10px; border: 2px solid white; width: 100%">
</div>

---

## ğŸ“Œ **What is Selenium?**

**Selenium** is the most popular **UI test automation framework**.
It automates **web browsers** (Chrome, Edge, Firefox, Safari).

- **Selenium WebDriver** â†’ API to control the browser
- **Selenium IDE** â†’ Record & replay tool (simple cases)
- **Selenium Grid** â†’ Run tests across multiple browsers/devices in parallel

ğŸ‘‰ Think of it like a **robot user ğŸ¤–** clicking around your site.

---

## ğŸ“Œ **Core Components of Selenium UI Tests**

| Component          | Purpose                                         |
| ------------------ | ----------------------------------------------- |
| **WebDriver**      | The engine that controls browsers               |
| **Locators**       | How you find elements (ID, Name, CSS, XPath)    |
| **Actions**        | Click, type, scroll, drag & drop                |
| **Assertions**     | Verify expected UI behavior                     |
| **Test Framework** | Runs tests (e.g., MSTest, NUnit, JUnit, PyTest) |

---

## ğŸ“Œ **Example Selenium Test (.NET + NUnit)**

```csharp
using NUnit.Framework;
using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;

namespace UITests
{
    public class LoginTests
    {
        private IWebDriver driver;

        [SetUp]
        public void Setup()
        {
            driver = new ChromeDriver(); // launch Chrome
        }

        [Test]
        public void Login_ShouldShowWelcomeMessage()
        {
            // Arrange
            driver.Navigate().GoToUrl("https://myapp.azurewebsites.net/login");

            // Act
            driver.FindElement(By.Id("username")).SendKeys("john");
            driver.FindElement(By.Id("password")).SendKeys("password123");
            driver.FindElement(By.Id("loginButton")).Click();

            // Assert
            var welcome = driver.FindElement(By.Id("welcomeMessage")).Text;
            Assert.AreEqual("Welcome John", welcome);
        }

        [TearDown]
        public void Cleanup()
        {
            driver.Quit(); // close browser
        }
    }
}
```

âœ… Opens Chrome â†’ logs in â†’ verifies welcome text.

---

## ğŸ“Œ **Running Selenium Tests in Azure Pipelines**

You can run Selenium UI tests inside your **CI/CD pipeline**.

<div align="center">
  <img src="image/4.ui-test/1753641120929.png" alt="1753641120929" style="border-radius: 10px; border: 2px solid white; width: 100%">
</div>

---

### ğŸ”¹ Pipeline YAML (with Chrome + Selenium)

```yaml
trigger:
  - main

pool:
  vmImage: "ubuntu-latest"

steps:
  - task: UseDotNet@2
    inputs:
      packageType: "sdk"
      version: "6.x"

  - task: DotNetCoreCLI@2
    displayName: Restore
    inputs:
      command: "restore"
      projects: "**/*.csproj"

  - task: DotNetCoreCLI@2
    displayName: Build
    inputs:
      command: "build"
      projects: "**/*.csproj"
      arguments: "--configuration Release"

  # Run Selenium UI tests
  - task: DotNetCoreCLI@2
    displayName: Run UI Tests
    inputs:
      command: "test"
      projects: "**/*UITests/*.csproj"
      arguments: "--configuration Release --logger trx"

  - task: PublishTestResults@2
    inputs:
      testResultsFiles: "**/TestResults/*.trx"
      testRunTitle: "Selenium UI Tests"
```

ğŸ‘‰ Azure Pipelinesâ€™ hosted agents come with **Chrome & Edge** pre-installed ğŸš€.

---

## ğŸ“Œ **Investigating Test Failures**

- **Failed step screenshot** â†’ You can extend Selenium to capture screenshots:

  ```csharp
  ((ITakesScreenshot)driver).GetScreenshot().SaveAsFile("error.png");
  ```

- In pipelines, upload screenshots as artifacts.
- Debug by checking console logs + screenshots.

---

## ğŸ“Œ **Best Practices**

âœ… Run UI tests **after build & deployment to a test/staging env**  
âœ… Keep UI tests **short and focused** (donâ€™t test everything via UI)  
âœ… Prefer **IDs** for element locators (avoid fragile XPath)  
âœ… Add **retry logic** for async/wait issues (use `WebDriverWait`)  
âœ… Combine with **Parallel runs** (Selenium Grid, Azure DevTest Labs, BrowserStack, Sauce Labs)  
âœ… Keep a healthy **test pyramid**:

> - ğŸŸ¢ Many unit tests
> - ğŸŸ¡ Fewer integration tests
> - ğŸ”´ Fewest UI tests (theyâ€™re slow & flaky if overused)

---

## ğŸ **TL;DR**

- **Selenium** = browser automation tool for UI testing.
- Use it to simulate real user actions (clicks, typing, login flows).
- In Azure Pipelines â†’ run Selenium tests with Chrome/Edge â†’ publish results.
- Best for **critical paths** (login, checkout, search).
- Donâ€™t rely solely on UI tests â†’ keep them small but powerful.
