# 🛵 Azure Import/Export Service – Full Walkthrough

## 📖 Official Definition

> _The Azure Import/Export service allows you to securely transfer large amounts of data to and from Azure Blob Storage or Azure Files by shipping encrypted hard drives to an Azure datacenter._

Translation: Instead of waiting **3 weeks** for your 50 TB backup to upload over your office Wi-Fi (while your boss stares at the spinning wheel 🌀), you put the data on encrypted drives, ship them to Azure, and they handle the heavy lifting.

---

## 🎯 When to Use It

- Migrating **huge datasets** (TB–PB scale) to Azure.
- Sending **offline backups** (instead of tapes).
- Exporting **archived/legal data** for compliance.
- When **network bandwidth sucks** 🚦.

👉 If you’re doing **PB-scale transfers regularly**, use **Azure Data Box** instead (Microsoft-managed device). Import/Export is more DIY.

---

## 🛠️ Step-by-Step Workflow

Here’s the **full workflow** broken down:

1️⃣ Prepare Dataset.csv & Driveset.csv  
2️⃣ Run WAImportExport Tool  
3️⃣ Encrypt Drives with BitLocker  
4️⃣ Tool Generates .jrn (Journal) File  
5️⃣ Create Import Job in Azure Portal  
6️⃣ Ship Drives to Azure Datacenter  
7️⃣ Azure Copies Data into Storage Account  
8️⃣ Track Job Status in Portal

---

## 🧑‍💻 Step 1: Create Required CSV Files

Before you prepare the drives, you need **two CSV files**:

### 1. **Dataset CSV**

- Defines **what data to copy** and **where in Azure it goes**.

👉 Example (`dataset.csv`):

```csv
DriveLetter,SourcePath,DestinationContainer,DestinationRelativePath
D,Backup\2023,backups,2023/
D,Images,images,latest/
```

This means:

- Copy folder `Backup\2023` from drive D → into Blob container `backups/2023/`.
- Copy folder `Images` from drive D → into Blob container `images/latest/`.

---

### 2. **Driveset CSV**

- Lists the **physical drives you’ll ship**.
- Includes **serial number + BitLocker key**.

👉 Example (`driveset.csv`):

```csv
DriveLetter,DriveId,BitLockerKey,DatasetFile
D,WD-WCC4E1234567,ABCD-1234-XYZ-0987-ABCD1234EFGH5678,dataset.csv
```

This means:

- Drive D → serial number `WD-WCC4E1234567` → encrypted with provided key → mapped to `dataset.csv`.

---

## ⚡ Step 2: Run WAImportExport Tool

Install the **WAImportExport tool** on a Windows machine with the drives attached.

👉 Example command to prepare an **import job**:

```powershell
WAImportExport.exe PrepImport /j:MyImportJob.jrn /id:MyImportJob01 `
/logdir:C:\Logs /d:D /sk:<storage-account-key> /csas:<sas-token> `
/dataset:D:\configs\dataset.csv /driveset:D:\configs\driveset.csv
```

### Breakdown:

- `/j` → Journal file (generated per drive).
- `/id` → Job ID.
- `/d` → Drive letter (D in this case).
- `/dataset` → Path to dataset CSV.
- `/driveset` → Path to driveset CSV.
- `/sk` or `/csas` → Storage account key or SAS token.

👉 After running, you’ll get:

- **BitLocker-encrypted drive**.
- **Journal file (.jrn)** for each drive.

---

## 🔐 Step 3: Encrypt the Drives

The tool automatically uses **BitLocker**. Azure requires encryption.

- You’ll upload the **BitLocker keys** in the job manifest (Portal).
- Without the key → Azure can’t decrypt → you just shipped **fancy paperweights** 😅.

---

## 📤 Step 4: Create Import Job in Azure Portal

1. Go to **Azure Portal → Import/Export jobs**.
2. Click **New Import Job**.
3. Provide:

   - Job name.
   - Storage account (Blobs or Files).
   - Return shipping details.
   - Upload **DriveSet CSV** (with BitLocker keys).

4. Portal generates a **shipping label**.

---

## 📦 Step 5: Ship the Drives

- Print the label from Azure Portal.
- Attach it to each package.
- Use the shipping carrier instructed (usually DHL/UPS).

---

## 🏭 Step 6: Azure Processes the Job

- Drives arrive at datacenter.
- Azure staff:

  - Reads `.jrn` file → knows what’s inside.
  - Decrypts drives with provided BitLocker keys.
  - Copies data into your Storage Account.

---

## ✅ Step 7: Monitor & Completion

- Track job status in **Azure Portal**.
- Once complete:

  - Data appears in your **Blob containers / File shares**.
  - For export jobs → drives are shipped back to you (with data).
  - For import jobs → drives are securely wiped.

---

## 📌 Quick Notes

- Supported drives: **2.5"/3.5" SATA II/III HDDs or SSDs** (max 10 drives/job, up to 35 TB each).
- Storage types: **Azure Blobs (Block/Page/Append)** + **Azure Files**.
- Costs: **Per-drive handling fee** + **shipping**.
- Better alternative: **Azure Data Box** (pre-provided appliance, no CSV headaches).

---

## 📝 Summary

- **Before prep** → create `dataset.csv` + `driveset.csv`.
- **During prep** → WAImportExport generates `.jrn` files.
- **In portal** → create Import job, upload DriveSet CSV, print shipping label.
- **Ship** → Azure copies data, updates job, sends confirmation.
