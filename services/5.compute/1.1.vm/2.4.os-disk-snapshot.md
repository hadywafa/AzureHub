# ğŸ“¸ Azure VM OS Disk Snapshot â€“ Safe, Fast, and Powerful

> _Need to back up or clone your Azure VM OS disk?_ Use **Azure Snapshots** â€“ they're like point-in-time photos of your disks.

---

## ğŸ§  What Is a Snapshot?

An **Azure snapshot** is a **read-only, point-in-time backup** of a **managed disk**. Think of it like taking a **screenshot** of your disk â€” you can later use it to restore, duplicate, or migrate the VM.

> âœ… Works for both **OS disks** and **data disks**  
> âœ… Can be **incremental** (saves space and cost)  
> âœ… Can be **used to create new disks/VMs**

---

## ğŸ§± Snapshot Types

| ğŸ“¦ Type           | ğŸ” Description                                                                |
| ----------------- | ----------------------------------------------------------------------------- |
| **Full Snapshot** | Captures the **entire disk** at that point in time                            |
| **Incremental**   | Captures **only the changes** since the last snapshot (default & recommended) |

> âœ… Azure now uses **incremental snapshots** by default for cost optimization
> âŒ Full snapshots use more storage and cost more

---

## ğŸ› ï¸ Common Use Cases

| Scenario                        | How Snapshots Help                                               |
| ------------------------------- | ---------------------------------------------------------------- |
| ğŸ›‘ Rollback after patch failure | Take a snapshot before risky updates â€” revert if anything breaks |
| ğŸ§ª Clone an existing VM         | Use a snapshot of the OS disk to spin up another identical VM    |
| ğŸ”„ Backup strategy              | Schedule regular snapshots for business continuity               |
| ğŸƒâ€â™‚ï¸ Fast VM redeployment         | Deploy from snapshot faster than rebuilding from scratch         |

---

## ğŸ” OS Disk Snapshot Lifecycle (Visual)

```mermaid
sequenceDiagram
    participant VM
    participant OS Disk
    participant Snapshot
    participant New VM

    VM->>OS Disk: Host OS (Windows/Linux)
    OS Disk->>Snapshot: Take snapshot (point-in-time)
    Snapshot->>New VM: Create new disk from snapshot
    New VM->>Azure: Boot with cloned OS
```

---

## âš™ï¸ How to Create a Snapshot (Azure Portal)

1. ğŸ–¥ï¸ Go to your **VM â†’ Disks**
2. Select the **OS Disk**
3. Click on **"Create Snapshot"**
4. Choose:

   - Name
   - Snapshot type (Incremental/Full)
   - Storage type (Standard/Premium)

5. âœ… Create!

---

## ğŸ§ª Azure CLI Example

```bash
# Variables
RESOURCE_GROUP="my-rg"
DISK_NAME="myVM_OsDisk"
SNAPSHOT_NAME="mySnapshot"

# Create snapshot
az snapshot create \
  --resource-group $RESOURCE_GROUP \
  --source "/subscriptions/.../disks/$DISK_NAME" \
  --name $SNAPSHOT_NAME \
  --incremental true \
  --location eastus
```

> ğŸ’¡ Tip: Use the snapshot ID later to create a new managed disk or VM!

---

## ğŸš€ Create a New VM from OS Disk Snapshot

1. ğŸ§± Create a new managed disk from snapshot
2. ğŸ“¦ Use that disk as the **OS disk** for a new VM
3. ğŸŸ¢ Start the new VM â€“ it boots from the exact state you snapshotted

---

## ğŸ›¡ï¸ Snapshot Is NOT a Full Backup?

> Correct! Snapshot â‰  backup.

- âŒ Snapshots are **stored in your subscription** (not cross-region)
- âœ… Use **Azure Backup** for long-term, geo-redundant backup of VMs

---

## ğŸ§® Retention Period â€“ ğŸ§Š How Long Are Snapshots Kept?

> ğŸ’¡ Snapshots in Azure have **no auto-expiry**. They are **kept until you delete them** manually.

| Feature                   | Behavior in Azure                                        |
| ------------------------- | -------------------------------------------------------- |
| â„ï¸ **Default retention**  | **Forever** (manual cleanup needed)                      |
| ğŸ” **Auto-retention**     | âŒ Not supported directly via snapshots                  |
| ğŸ“… **Automated deletion** | âœ… Use **Azure Automation** or **Backup Vault Policies** |

### ğŸ”„ How to Auto-Delete After X Days?

Use **Azure Automation + Tags** or **Lifecycle policies** with a script:

```bash
# Example logic:
# 1. Tag snapshots with creation date
# 2. Run Azure Automation script weekly to delete old ones
```

> âœ… Or: use **Azure Backup** which includes built-in retention policies (30/60/365 days).

---

## ğŸ“Š Snapshot vs Backup â€“ Quick Comparison

| Feature               | **Snapshot**                | **Azure Backup**                   |
| --------------------- | --------------------------- | ---------------------------------- |
| Point-in-time Copy    | âœ… Yes                      | âœ… Yes                             |
| OS/Data Disk Support  | âœ… Both                     | âœ… Both                            |
| Long-Term Retention   | âŒ Not ideal                | âœ… Yes                             |
| Cross-Region Storage  | âŒ No                       | âœ… Yes                             |
| Automation/Scheduling | âŒ Manual (unless scripted) | âœ… Built-in                        |
| Ideal Use             | Testing, rollback, cloning  | Compliance, DR, production backups |

---

## ğŸ’° Cost Considerations

- ğŸ”¢ **You pay per GB/month** of snapshot storage
- âœ… **Incremental snapshots** reduce cost by storing only changes
- ğŸ“¦ Stored in the **same region** as the source disk

---

## âœ… Summary â€“ Azure OS Disk Snapshots

| âœ… Feature             | ğŸ” Description                                         |
| ---------------------- | ------------------------------------------------------ |
| Point-in-time copies   | Yes â€“ ideal for quick restores or cloning              |
| OS/Data Disk supported | Yes â€“ both can be snapshotted                          |
| CLI & Portal support   | Fully scriptable via Azure CLI                         |
| Default type           | Incremental (saves cost & space)                       |
| Reboot required?       | âŒ No downtime or VM restart needed to take a snapshot |
| Backup vs Snapshot     | Snapshot = short-term copy; Backup = long-term/DR      |
