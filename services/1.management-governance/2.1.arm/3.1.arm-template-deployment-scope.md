# ðŸ”­ Deployment Scopes in ARM Templates

Azure allows you to **deploy resources** at different scopes depending on **what youâ€™re creating** and **who should â€œownâ€ it**.
The four major scopes are:

1. **Resource Group (most common)**
2. **Subscription**
3. **Management Group**
4. **Tenant**

---

## 1ï¸âƒ£ Resource Group Scope

ðŸ‘‰ **Default / Most common**

- **Where the resources go:** Into a _single resource group_.
- **Deployment command:**

  - CLI â†’ `az deployment group create`
  - PS â†’ `New-AzResourceGroupDeployment`

- **Typical resources deployed here:**

  - Virtual machines, storage accounts, VNets, app services, etc.

- **When to use:**

  - Standard workload deployments.
  - Team projects where each workload sits in its own RG.

- **Limitations:**

  - Everything must go into the same RG (though a nested/linked template _can_ target other RGs).

---

## 2ï¸âƒ£ Subscription Scope

ðŸ‘‰ **Above resource groups â€“ affects subscription-wide settings**

- **Where the resources go:** Into a subscription, but can create RGs **and** resources across multiple RGs.
- **Deployment command:**

  - CLI â†’ `az deployment sub create`
  - PS â†’ `New-AzSubscriptionDeployment`

- **Typical resources deployed here:**

  - Resource groups themselves (`Microsoft.Resources/resourceGroups`).
  - Policy assignments (subscription-level).
  - Role assignments (RBAC at subscription).
  - Networking resources that span RGs.

- **When to use:**

  - You want to _create resource groups dynamically_ in your template.
  - Enforcing policies or RBAC across the whole subscription.
  - Governance scenarios.

- **Limitations:**

  - Cannot deploy â€œnormalâ€ resources (VMs, storage accounts, etc.) unless you also specify their RG in the template.

---

## 3ï¸âƒ£ Management Group Scope

ðŸ‘‰ **For _multiple subscriptions_ under one governance umbrella**

- **Where the resources go:** To a management group (logical container for subscriptions).
- **Deployment command:**

  - CLI â†’ `az deployment mg create`
  - PS â†’ `New-AzManagementGroupDeployment`

- **Typical resources deployed here:**

  - Azure Policy definitions and assignments.
  - RBAC role assignments at management group.
  - Blueprints (governance across subscriptions).

- **When to use:**

  - Enterprise environments managing 10sâ€“100s of subscriptions.
  - Central IT enforcing _guardrails_ across all child subscriptions.
  - Setting up policies, naming conventions, cost controls org-wide.

- **Limitations:**

  - Cannot create resource groups or resources directly (only governance-level items).

---

## 4ï¸âƒ£ Tenant Scope

ðŸ‘‰ **Top level = Entire Azure Active Directory (now Microsoft Entra ID) tenant**

- **Where the resources go:** Across the _entire tenant_.
- **Deployment command:**

  - CLI â†’ `az deployment tenant create`
  - PS â†’ `New-AzTenantDeployment`

- **Typical resources deployed here:**

  - Management groups.
  - Policy definitions at tenant.
  - Role definitions at tenant.
  - Subscription creation (via APIs).

- **When to use:**

  - Enterprise-wide standardization before subscriptions exist.
  - Defining _root policies_ inherited by all management groups/subscriptions.

- **Limitations:**

  - Very high-privilege â€“ requires Tenant Root Group permissions.
  - Not for â€œeveryday workloads.â€

---

## ðŸ§­ When to Use Which Scope

| Scope                | Best For                                                     | Examples                                                            |
| -------------------- | ------------------------------------------------------------ | ------------------------------------------------------------------- |
| **Resource Group**   | Workload deployment (most day-to-day deployments).           | VMs, storage accounts, web apps, VNets inside a single project RG.  |
| **Subscription**     | Deploying **multiple RGs** and subscription-level resources. | Creating RGs, assigning policies at subscription, RBAC assignments. |
| **Management Group** | Governing **multiple subscriptions** consistently.           | Policies, role assignments, blueprints for an enterprise.           |
| **Tenant**           | Organization-wide governance **before/above subscriptions**. | Creating management groups, global policy/role definitions.         |

---

## ðŸš¦ Authentication vs Authorization at Scopes

- **Authentication** â†’ proving _who you are_ (Azure AD / Entra ID identity).
- **Authorization** â†’ proving _what you can do_ at that scope.

  - Example: You might authenticate fine, but if you donâ€™t have `Owner` or `Contributor` at **subscription scope**, you canâ€™t deploy there.

> ðŸ”‘ Rule of thumb: **higher scopes need higher permissions**.

- RG scope â†’ need Contributor at RG.
- Subscription scope â†’ need Contributor at subscription.
- MG/Tenant scope â†’ need elevated **Owner / User Access Admin** at that level.

---

## âœ… Quick takeaway:

- **99% of workloads** â†’ deploy to **resource group**.
- **Org-wide rules/policies** â†’ deploy to **subscription, management group, or tenant**, depending on how broad you want to go.
