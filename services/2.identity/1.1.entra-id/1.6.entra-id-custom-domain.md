# ğŸŒ Custom Domains in Entra ID (Azure AD)

> Because nobody wants to stay stuck with `contoso.onmicrosoft.com`

---

<div align="center">
  <img src="images/ex-custom-tenant-domains.png" alt="Example: Custom Tenant with Custom Domain Names" style="width: 100%; border-radius: 10px;">
</div>

---

## ğŸ“Œ Whatâ€™s the Point?

By default, when you create an Azure tenant, it gives you a domain like:

```ini
YourTenantName.onmicrosoft.com
```

Thatâ€™s fine for testing, but not for real businesses. You want your users to log in with:

```ini
user@yourcompany.com
```

Thatâ€™s where **custom domain names** come in. You map your **real, branded domain** to Entra ID so it can manage authentication for your users, apps, and services.

---

## ğŸ§  Benefits of Custom Domain

âœ… Professional user sign-in: `emma@fabrikam.com` instead of `emma_fabrikam.onmicrosoft.com`
âœ… Seamless branding for apps and emails
âœ… Required for SSO, B2B, and app federation
âœ… Needed for Microsoft 365 integration and verified DNS ownership

---

## ğŸ§­ Where to Configure?

You can manage domains from:

- [âœ… portal.azure.com â†’ Microsoft Entra ID â†’ Custom domain names](https://portal.azure.com)
- [âœ… entra.microsoft.com â†’ Identity â†’ Domains](https://entra.microsoft.com)
- âœ… Microsoft 365 admin portal (admin.microsoft.com) â€” if you're using Microsoft 365 too

---

## ğŸ› ï¸ How to Add a Custom Domain

Hereâ€™s a practical step-by-step guide:

---

### ğŸ§± Step 1: Own the Domain

You must already own a domain like `fabrikam.com`, managed through a registrar like GoDaddy, Namecheap, or Cloudflare.

---

### ğŸ”§ Step 2: Add Domain in Entra ID

1. Go to [portal.azure.com](https://portal.azure.com)
2. Navigate to **Microsoft Entra ID**
3. Select **Custom domain names**
4. Click **+ Add custom domain**
5. Type `yourcompany.com`
6. Click **Add Domain**

---

### ğŸ§ª Step 3: Verify Domain (DNS TXT Record)

Now Azure gives you a **TXT record** like this:

```ini
Record type: TXT
Name: @
Value: MS=ms12345678
TTL: 3600
```

â¡ï¸ Go to your domain registrar (e.g., GoDaddy)
â¡ï¸ Add this TXT record to the DNS zone
â¡ï¸ Wait a few minutes (DNS propagation)
â¡ï¸ Back in Azure, click **Verify**

ğŸ‰ Once verified, the domain is yours in Entra ID!

---

## âœ… Domain Statuses

| Status         | Meaning                                              |
| -------------- | ---------------------------------------------------- |
| **Unverified** | DNS not configured or not propagated yet             |
| **Verified**   | Domain is active and usable for identities           |
| **Default**    | All new users will get emails like `@yourdomain.com` |

ğŸ”„ You can set any verified domain as the **default**.

---

## ğŸ§ª Example in Action

> Letâ€™s say you work at `tailwindtraders.com`.

You want all new users to log in with `@tailwindtraders.com`.

**Steps:**

- Add domain to Entra ID
- Verify with DNS TXT
- Set it as default
- New users get UPNs like `susan@tailwindtraders.com`

---

## ğŸ” Can I Add Multiple Domains?

YES. You can add and verify **many domains** like:

- `contoso.com`
- `marketing.contoso.com`
- `contoso.net`

ğŸ§‘â€ğŸ’¼ Great for mergers, subsidiaries, or brands with multiple names.

---

## âš ï¸ Gotchas & Tips

- âŒ You **canâ€™t delete** the `.onmicrosoft.com` domain â€” itâ€™s forever.
- âœ… You **can switch default domain** anytime.
- âœ… Use **PowerShell or CLI** for automation in large orgs.
- âŒ Donâ€™t skip DNS propagation time (can take a few minutes to hours).

---

## ğŸ§° PowerShell Example

Want to automate adding a domain?

```powershell
Connect-AzureAD
New-AzureADDomain -Name "tailwindtraders.com"
```

Then you still need to verify via DNS manually or script it using your registrar's API.

---

## ğŸ” Custom Domains + Federation = ğŸ”¥

Once the domain is added, you can:

- Setup **SSO with ADFS** or **third-party IdPs**
- Enable **B2B Guest access**
- Use **custom branding** on login page

---

## ğŸ“Œ Summary Table

| ğŸ’¬ Concept                | ğŸ§  Explanation                              |
| ------------------------- | ------------------------------------------- |
| Default Domain            | `yourtenant.onmicrosoft.com` (always there) |
| Custom Domain             | Your real domain like `fabrikam.com`        |
| Where to Add              | Azure Portal, Entra Portal, or M365 Admin   |
| Verification Method       | Add a TXT record in your DNS provider       |
| Use Cases                 | Branding, SSO, B2B, clean UPNs              |
| Can I Add Many?           | Yes! Multiple domains per tenant            |
| Can I Delete onmicrosoft? | No. It stays as fallback                    |

---

## ğŸ§  Compared to AWS

| Feature                | Azure Entra ID                      | AWS IAM                             |
| ---------------------- | ----------------------------------- | ----------------------------------- |
| Custom Domain SSO      | âœ”ï¸ Built-in via domain verification | âŒ Requires Cognito or external IdP |
| Sign-in Domain Control | âœ”ï¸ You control UPNs per domain      | âŒ No concept of domain UPNs        |
| Multi-domain Support   | âœ”ï¸ Native                           | âŒ Not supported in IAM directly    |
| Branding Login Page    | âœ”ï¸ Custom branding per domain       | âŒ Not supported in IAM             |
