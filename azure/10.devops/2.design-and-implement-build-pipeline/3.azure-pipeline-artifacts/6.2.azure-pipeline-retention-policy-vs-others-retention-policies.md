# 🗑️ Azure Pipeline Retention Policy — What It Covers

## 🔹 1. Pipeline Runs

- Retention policy controls **how long pipeline runs are kept**.
- A run = logs, timeline, metadata.
- If the run expires, the history vanishes.

---

## 🔹 2. Pipeline Artifacts

- **YES** → Retention applies.
- Artifacts (those you published with `PublishPipelineArtifact` or `PublishBuildArtifacts`) are tied to the **run’s lifetime**.
- When a pipeline run expires, its artifacts are also deleted from Azure DevOps storage.
- This avoids storage bloat.

👉 So, if retention is set to 30 days → build artifacts vanish with the run after 30 days.

---

## 🔹 3. Pipeline Caching

- **NO** → Retention policy does **not** control cache.
- Cache has its **own lifecycle rules**:

  - Evicted automatically by Azure DevOps when unused or when storage pressure occurs.
  - TTL (time-to-live) is usually **7 days to 30 days**, depending on service health.
  - You **cannot control cache retention** directly.

👉 Cache is a **best-effort performance boost**, not a long-term store.

---

## 🔹 4. Azure Artifacts (package feeds)

- **Separate retention policies** apply.
- Managed under **Azure Artifacts feed settings**, not pipeline retention.
- You can configure:

  - Keep last N versions.
  - Unlist/delete old versions automatically.

---

## ⚖️ Summary Table

| Item                   | Controlled by **Pipeline Retention Policy**? | Notes                                                   |
| ---------------------- | -------------------------------------------- | ------------------------------------------------------- |
| **Pipeline Run Logs**  | ✅ Yes                                       | Run history deleted after N days.                       |
| **Pipeline Artifacts** | ✅ Yes                                       | Deleted with run (deliverables tied to build).          |
| **Pipeline Caches**    | ❌ No                                        | Evicted automatically by service (not user-controlled). |
| **Azure Artifacts**    | ❌ No                                        | Managed separately in feed settings.                    |

---

## ✅ TL;DR

- **Pipeline Retention Policy = pipeline run + pipeline artifacts.**
- ❌ Does not affect caching.
- ❌ Does not affect Azure Artifacts (feeds).

👉 So think: _“If it belongs to a pipeline run (logs, artifacts) → retention wipes it. If it’s external (cache or package feed) → managed differently.”_
