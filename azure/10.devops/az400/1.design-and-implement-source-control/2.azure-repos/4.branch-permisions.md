# ğŸ”’ **Azure Repos Branch Permissions**

## ğŸ“– **What Are Branch Permissions?**

Branch Permissions = **rules that control who can do what on a Git branch** in Azure Repos.
They let you **protect sensitive branches** (like `main`, `release`) and give developers freedom on **feature branches**.

ğŸ‘‰ Think of them as **ğŸšª door locks**:

- Some people can **ğŸ‘€ read only**
- Some can **âœï¸ push changes**
- Some can **ğŸ’¥ rebuild the whole door** (force push)
- Some can even **ğŸ”‘ remove other peopleâ€™s locks**

---

## ğŸ§± **Why Use Them?**

Without permissions, anyone could:

- Force-push history â†’ ğŸ’£ mess up `main`.
- Push unreviewed code â†’ ğŸ˜± break production.
- Merge without following branch policies.

With permissions:

- `main` stays clean.
- Only authorized people can bypass policies.
- Developers can still freely manage their own feature branches.

---

## ğŸ› ï¸ **How to Set Branch Permissions**

### Steps (UI flow):

1. Go to **Repos â†’ Branches**.
2. Find the branch (`main` for example).
3. Click the `...` â†’ **Branch security**.
4. Assign **Allow**, **Deny**, or **Not set** for each permission.
5. Save âœ….

---

## ğŸ—ï¸ **Types of Branch Permissions**

| Permission                              | What It Does                            | Example                             |
| --------------------------------------- | --------------------------------------- | ----------------------------------- |
| **Contribute**                          | Push commits, lock branch               | Push bug fixes to `feature/login`   |
| **Force push**                          | Rewrite history, delete branch          | Rebase & push a rewritten branch    |
| **Manage permissions**                  | Grant/revoke rights for others          | Let leads manage security on `main` |
| **Remove othersâ€™ locks**                | Unlock branch if someone else locked it | Ops unlocks branch locked by dev    |
| **Bypass policies when pushing**        | Push directly, ignoring branch policies | Emergency hotfix to `main`          |
| **Bypass policies when completing PRs** | Complete PR even if policies not met    | Merge PR without reviewers          |

âš ï¸ **Danger zone** = Force push + Bypass policies. Only admins should have these!

---

## ğŸ”„ **Inheritance & Defaults**

- By default, **repository permissions apply to all branches**.
- But you can **override** them per branch.

âœ¨ When you create a new branch, you (the creator) automatically get:

- **Contribute** âœ…
- **Force push** âœ…
- **Manage permissions** âœ… (if allowed at repo level)
- **Remove othersâ€™ locks** âœ…

ğŸ‘‰ This makes feature branches flexible (you donâ€™t need admin help).

---

## ğŸ§­ **Precedence Rules (Allow vs Deny)**

- **Deny wins over Allow.**
- Example: If group = Allow, but user = Deny â†’ âŒ denied.
- Exception: **Project Collection Admins** can override.

---

## ğŸ“‹ **Real-World Setup Examples**

### ğŸ”¹ Protecting `main` branch

- Contribute â†’ âŒ Deny for all devs
- Force push â†’ âŒ Deny
- Bypass policies â†’ âŒ Deny for everyone except release managers
- Manage permissions â†’ âœ… Only team leads

ğŸ‘‰ Ensures `main` is untouchable unless through PRs + approvals.

### ğŸ”¹ Feature branches

- Contribute â†’ âœ… Allow for creator
- Force push â†’ âœ… Allow (let devs rebase/rewrite freely)
- Manage permissions â†’ âœ… Allow for creator

ğŸ‘‰ Developers can work flexibly without bottlenecks.

---

## ğŸ†š **Branch Policies vs Branch Permissions**

| Feature | Branch Policies                           | Branch Permissions                           |
| ------- | ----------------------------------------- | -------------------------------------------- |
| Purpose | Ensure **quality** of code before merging | Control **who can act** on branch            |
| Example | Require 2 reviewers, run CI build         | Deny force push, allow only admins to bypass |
| Focus   | Process & governance                      | Access & security                            |
| Scope   | Usually `main`, `release`                 | Any branch                                   |

ğŸ‘‰ Together: **Policies = rules of the game, Permissions = who can play.** ğŸ®

---

## âœ… **Summary**

- **Branch Permissions = security guardrails** for your branches.
- Control **who can contribute, force push, bypass policies, or manage rights**.
- Default branch creators get extra flexibility.
- **Deny always beats Allow.**
- Use strict permissions on `main`/`release`, and flexible ones on feature branches.
