# ğŸµ **SonarQube â€“ Self-Hosted Code Quality & Security Platform**

## ğŸ“Œ **What is SonarQube?**

**SonarQube** is an **open-source platform** (with commercial editions) that lets you **analyze, measure, and enforce code quality & security**.

- Runs on **your servers or containers** (on-prem or in your cloud).
- Scans source code for:

  - ğŸ› **Bugs**
  - ğŸ” **Vulnerabilities**
  - ğŸ§¹ **Code Smells**
  - ğŸ“Š **Coverage**
  - ğŸ“‘ **Duplication**

> ğŸ’¡ Analogy:  
> If **SonarCloud** = SaaS (like Gmail),  
> then **SonarQube** = Self-hosted mail server (you control infra, DB, upgrades).

---

## ğŸ“Œ **Why Use SonarQube?**

- ğŸ”’ Keep analysis **in your own environment** (good for **regulated industries**).
- ğŸ› ï¸ Works even without internet (air-gapped networks).
- ğŸ”§ **Custom rules** & plugins.
- ğŸŒ Supports huge **enterprise-scale projects**.
- ğŸ’° Licensing: **Community Edition** (free, basic features), **Developer/Enterprise/Data Center Editions** (advanced features).

---

## ğŸ“Œ **Architecture**

ğŸ”¹ **1. SonarScanner**: Runs inside your pipeline or IDE.  
ğŸ”¹ **2. SonarQube Server**: Processes & stores results.  
ğŸ”¹ **3. Database**: Stores metrics & issues.  
ğŸ”¹ **4. Dashboard**: Web UI with code quality reports.

<div align="center">
  <img src="image/6.1.sonar-qube/1756408326015.png" alt="SonarQube architecture" style="width: 100%; border-radius: 10px; border: 2px solid white;">
</div>

---

## ğŸ“Œ **Key Features**

| Category                    | SonarQube Provides                         |
| --------------------------- | ------------------------------------------ |
| ğŸ” **Static Code Analysis** | Bugs, vulnerabilities, smells              |
| ğŸ“Š **Metrics**              | Coverage, duplication, complexity          |
| ğŸš¦ **Quality Gates**        | Block merge/deploy if thresholds not met   |
| ğŸ”§ **Custom Rules**         | Add/disable coding rules per project       |
| ğŸŒ **Multi-Language**       | 20+ languages (C#, Java, Python, JS, etc.) |
| ğŸ”’ **Security**             | Detects OWASP Top 10, CWE issues           |
| âš¡ **Integrations**         | Azure DevOps, Jenkins, GitHub, GitLab      |

---

## ğŸ“Œ **Example Pipeline (Azure DevOps + SonarQube)**

```yaml
trigger:
  - main

pool:
  vmImage: "ubuntu-latest"

steps:
  - task: SonarQubePrepare@5
    inputs:
      SonarQube: "sq-service-conn" # Service Connection to self-hosted SonarQube
      scannerMode: "MSBuild"
      projectKey: "myproject"
      projectName: "MyProject"

  - task: DotNetCoreCLI@2
    inputs:
      command: "build"
      projects: "**/*.csproj"

  - task: SonarQubeAnalyze@5

  - task: SonarQubePublish@5
    inputs:
      pollingTimeoutSec: "300"
```

ğŸ‘‰ Very similar to SonarCloud â€” but instead of sending results to the **SonarCloud SaaS**, they go to **your SonarQube server**.

---

## ğŸ“Œ **SonarQube Editions**

| Edition              | Who Itâ€™s For              | Features                        |
| -------------------- | ------------------------- | ------------------------------- |
| **Community (Free)** | Small teams               | Basic static analysis           |
| **Developer**        | Teams needing depth       | Branch analysis, PR decoration  |
| **Enterprise**       | Large orgs                | Portfolio reporting, governance |
| **Data Center**      | Enterprises with HA needs | Clustering, scaling             |

---

## ğŸ“Œ **SonarQube vs SonarCloud**

| Feature            | **SonarQube** (Self-Hosted)       | **SonarCloud** (SaaS)                   |
| ------------------ | --------------------------------- | --------------------------------------- |
| Hosting            | You host (VMs, K8s, etc.)         | SonarSource hosts                       |
| Setup              | Manual (server, DB, config)       | Super easy                              |
| Maintenance        | You upgrade & scale               | Automatic                               |
| Internet required? | âŒ Works offline                  | âœ… Needs internet                       |
| Security           | Your data stays internal          | Data stored in SonarCloud               |
| Pricing            | Free + paid editions              | Free for public repos, paid for private |
| Best for           | Enterprises, regulated industries | Startups, small/medium teams            |

---

## ğŸ“Œ **Best Practices with SonarQube**

- ğŸ› ï¸ Run **scanner in CI/CD** for every PR.
- ğŸš¦ Set **Quality Gates** â†’ block builds with high-severity issues.
- ğŸ§ª Combine with **unit test coverage**.
- ğŸ”„ Upgrade regularly â†’ new rules & bug fixes.
- ğŸ›¡ï¸ Secure DB + server (since data is internal).

---

## ğŸ **TL;DR**

- **SonarQube** = self-hosted **code quality & security platform**.
- Similar to **SonarCloud**, but you run & manage the server.
- Great for **enterprises needing data control, customization, or offline use**.
- Works seamlessly with **Azure DevOps, Jenkins, GitHub, GitLab**.

---

<div align="center">
  <img src="image/6.1.sonar-qube/1756408850707.png" alt="SonarQube with Jenkins" style="border-radius: 10px; border: 2px solid white; width: 80%;">
</div>

---

## ğŸ **SonarQube with Jenkins**

<div align="center">
  <img src="image/6.1.sonar-qube/1756408207885.png" alt="SonarQube with Jenkins" style="border-radius: 10px; border: 2px solid white; width: 80%;">
</div>
