# 🏗️ Azure DevOps Deployment Concepts

## 📌 1. Agent Pool

- **Definition** → Collection of **build/release agents** that execute pipeline jobs.
- **Purpose** → Provides compute power (VMs/agents) to run builds/tests/deployments.
- **Scope** → Org-wide (shared across projects).
- **Example** → Microsoft-hosted `ubuntu-latest`, or your custom self-hosted agents.

---

## 📌 2. Deployment Group

- **Definition** → Collection of **target servers/machines** (on-prem, VM, IIS servers) used in **classic release pipelines**.
- **Purpose** → Defines _where_ your app gets deployed.
- **Scope** → Project-level.
- **Example** → `Prod-Web-Servers` group with 3 IIS servers running deployment agents.

---

## 📌 3. Environment

- **Definition** → Modern **replacement for Deployment Groups** in **YAML pipelines**.
- **Purpose** → Represents _where_ deployments happen, but also adds:
  - ✅ **Approvals** (e.g., manager sign-off before prod deploy).
  - ✅ **Checks** (quality gates, policy validation).
  - ✅ **Resource types** (VMs, Kubernetes, Azure resources).
- **Scope** → Project-level.
- **Example** → `Production` environment with Kubernetes cluster + approvals.

---

## 📊 Comparison Table

| Feature               | **Agent Pool**            | **Deployment Group**            | **Environment**                           |
| --------------------- | ------------------------- | ------------------------------- | ----------------------------------------- |
| **What it Manages**   | Pipeline agents (workers) | Target servers (classic)        | Deployment targets (modern)               |
| **Pipeline Type**     | CI/CD jobs (build/test)   | Classic Release Pipelines       | Multi-stage YAML                          |
| **Scope**             | Organization              | Project                         | Project                                   |
| **Used For**          | Running pipeline tasks    | Deploying to VMs, IIS, on-prem  | Deploying to cloud/VMs/K8s with approvals |
| **Modern Equivalent** | Still valid               | ✅ Replaced by **Environments** | New standard                              |

---

## 📈 Visual Diagram

```mermaid
flowchart TD
    A[Agent Pool] -->|Provides compute| B[Pipeline Jobs (build/test)]
    C[Deployment Group] -->|Classic| D[Release Pipeline Deployment]
    E[Environment] -->|Modern YAML| D
    D -->|Targets| F[VMs, IIS, Azure, K8s]
```

---

## 🛠️ Real-World Example

### You’re deploying an **e-commerce web app**:

1. **Agent Pool** → Microsoft-hosted Ubuntu agent builds the code.
2. **Deployment Group** → (Classic) deploys build artifact to `WebServer1`, `WebServer2`.
3. **Environment** → (Modern) defines `Production` environment → deploys app to AKS cluster with approval gate.

---

## ✅ TL;DR

- **Agent Pool** = who runs the pipeline (workers).
- **Deployment Group** = where apps deploy (classic).
- **Environment** = where apps deploy + approvals + checks (modern YAML).

⚡ Exam hack:

- If you see **classic release pipeline** → Deployment Group.
- If you see **YAML + approvals** → Environment.
- If you see **pipeline compute agents** → Agent Pool.
