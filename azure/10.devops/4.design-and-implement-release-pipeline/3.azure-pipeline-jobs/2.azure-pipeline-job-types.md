# ğŸ’¼ Azure Pipeline Job Types

In YAML-based Azure Pipelines, **jobs** are the fundamental units of execution that run **independently** on agents. Azure supports the following job types:

1. ğŸ—ï¸ **Job (Agent Job)** â€“ Default
2. ğŸ¬ **Container Job**
3. ğŸš€ **Deployment Job**
4. ğŸ”— **Server Job**
5. ğŸ§ª **Matrix Job**
6. ğŸ§± **Template Job**

---s

## 1. ğŸ—ï¸ **Job (Agent Job)** â€“ Default

### âœ… What it is:

A job that runs on a **build agent** (Microsoft-hosted or self-hosted). It contains steps like scripts, tasks, and artifact handling.

### âœ… Example:

```yaml
jobs:
  - job: BuildJob
    displayName: "Build the App"
    pool:
      vmImage: ubuntu-latest
    steps:
      - script: echo "Building..."
```

### ğŸ”¹ Use When:

- You need to compile code, run tests, or build artifacts
- You want isolation per job
- You want to parallelize with multiple jobs

---

## 2. ğŸ¬ **Container Job**

### âœ… What it is:

A special agent job that runs inside a **Docker container**.

### âœ… Example:

```yaml
jobs:
  - job: ContainerBuild
    container: "node:14"
    steps:
      - script: node -v
```

### ğŸ”¹ Use When:

- You need consistent build environments
- You want to test inside containers
- You need custom tools not available in hosted agents

> ğŸ”„ You can also use **multi-container jobs** with `services:` for things like database containers.

---

## 3. ğŸš€ **Deployment Job**

### âœ… What it is:

A job that **targets an environment** and can include approval gates, checks, and rollback logic.

### âœ… Syntax:

```yaml
jobs:
  - deployment: DeployWeb
    environment: "prod"
    strategy:
      runOnce:
        deploy:
          steps:
            - script: echo "Deploying to production"
```

### ğŸ”¹ Use When:

- You are deploying to **environments** like test, staging, or prod
- You need **approvals**, **manual interventions**, or **multi-phase strategies**
- You want integration with **Azure Environments** and deployment tracking

---

## 4. ğŸ”— **Server Job**

### âœ… What it is:

A job that runs entirely on the **Azure DevOps server**, not on an agent.

### âœ… Example:

```yaml
jobs:
  - job: ServerJob
    pool: server
    steps:
      - task: InvokeRESTAPI@1
```

### ğŸ”¹ Use When:

- You want to call REST APIs or manipulate Azure DevOps artifacts
- You want to avoid consuming build agents
- Youâ€™re working with `checkout: none`, API triggers, or metadata-only actions

> ğŸ’¡ Only a limited set of tasks (e.g., `InvokeRESTAPI`, `ManualValidation`) work in server jobs.

---

## 5. ğŸ§ª **Matrix Job**

### âœ… What it is:

A job that runs **multiple configurations** (like different OS, Node versions, etc.) **in parallel** by expanding a matrix.

### âœ… Example:

```yaml
jobs:
  - job: TestMatrix
    strategy:
      matrix:
        linux:
          imageName: ubuntu-latest
        windows:
          imageName: windows-latest
    pool:
      vmImage: $(imageName)
    steps:
      - script: echo "Running on $(imageName)"
```

### ğŸ”¹ Use When:

- You want to run the **same steps** across multiple environments
- You want parallelism with minimal code
- You are testing cross-platform or multiple configs

---

## 6. ğŸ§± **Template Job**

Not technically a new job **type**, but a **job defined inside a reusable template**.

### âœ… Example:

**Template file: `myjob-template.yml`**

```yaml
parameters:
  jobName: ""
jobs:
  - job: ${{ parameters.jobName }}
    steps:
      - script: echo "From template"
```

**Usage:**

```yaml
- template: myjob-template.yml
  parameters:
    jobName: BuildApp
```

### ğŸ”¹ Use When:

- You want to **reuse logic** across multiple pipelines
- You want to build job libraries (like microservices CI)

---

## ğŸ§­ Job Type Comparison Table

| Job Type     | Runs On             | Key Use Case                             | Supports Steps? | Supports Matrix?        |
| ------------ | ------------------- | ---------------------------------------- | --------------- | ----------------------- |
| `job`        | Agent               | Build, test, publish artifacts           | âœ… Yes          | âœ… Yes (via `strategy`) |
| `deployment` | Agent (with env)    | Controlled deployments with gates/checks | âœ… Yes          | âŒ No                   |
| `server`     | Azure DevOps server | Metadata or API tasks (no agent needed)  | âš ï¸ Limited      | âŒ No                   |
| `container`  | Docker container    | Consistent build/test environments       | âœ… Yes          | âœ… Yes                  |
| `matrix`     | Multiple agents     | Cross-platform/config testing            | âœ… Yes          | âœ… Yes                  |
| `template`   | Agent or container  | Reusable pipeline logic                  | âœ… Yes          | âœ… Yes                  |

---

## ğŸ’¡ Tips

- âœ… Use `deployment` for production/staging to get approvals
- âœ… Use `container` for exact build parity (Node, Python, .NET)
- âœ… Use `server` jobs to avoid wasting agent time
- âœ… Use `matrix` to test across versions/platforms
- âœ… Use templates to keep pipelines DRY and modular
