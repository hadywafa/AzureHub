# 🔄 Common Git Scenarios & Patterns (with Commands)

## 1️⃣ **Starting a New Feature (Feature Branch Workflow)**

💡 Pattern: _“Don’t commit to `main` directly. Work in branches → PR → merge.”_

**Scenario**: You’re adding a login page.

```bash
# Get the latest code
git checkout main
git pull --rebase origin main

# Create a feature branch
git checkout -b feature/login

# Work on code...
git add login.html login.js
git commit -m "feat: add login page"

# Push branch
git push origin feature/login

# Open PR → Team reviews → Merge into main
```

👉 This pattern = **Feature Branch Workflow**.
✅ Clean history, easy PR reviews.
⚡ Used in **Azure DevOps, GitHub, GitLab** daily.

---

## 2️⃣ **Hotfix in Production (Hotfix Workflow)**

💡 Pattern: _“Fix critical bug NOW, skip sprint.”_

**Scenario**: Production login is broken.

```bash
# Create hotfix branch from main
git checkout main
git pull origin main
git checkout -b hotfix/fix-login-bug

# Fix code...
git commit -am "fix: handle null password crash"

# Push & PR
git push origin hotfix/fix-login-bug
```

👉 PR is merged quickly → deployed to prod.
Then cherry-pick fix into `develop` if using GitFlow.

---

## 3️⃣ **Syncing Your Branch (Rebase Pattern)**

💡 Pattern: _“Keep branch up to date without messy merge commits.”_

**Scenario**: While you coded, main branch moved ahead.

```bash
git checkout feature/login
git fetch origin
git rebase origin/main
```

👉 Moves your commits on top of the latest `main`.
✅ History stays **linear & clean**.

---

## 4️⃣ **Squash Commits Before Merge**

💡 Pattern: _“Turn messy work into a clean commit.”_

**Scenario**: You made 10 WIP commits (`fix typo`, `try again`, etc.).

```bash
git checkout feature/login
git rebase -i HEAD~10   # squash into 1 commit
```

👉 Final PR commit history = clean.
✅ Makes blame/history easier to read.

---

## 5️⃣ **Cherry-Picking a Commit**

💡 Pattern: _“Bring one commit from another branch without merging all.”_

**Scenario**: You fixed a bug in `develop` but need it in `main` immediately.

```bash
git checkout main
git pull origin main
git cherry-pick a1b2c3d   # commit hash from develop
```

👉 Applies just that commit → no full merge needed.

---

## 6️⃣ **Undoing a Mistake**

💡 Pattern: _“Oh no, I broke it — how to go back?”_

- **Unstage a file**:

  ```bash
  git reset file.txt
  ```

- **Discard changes**:

  ```bash
  git restore file.txt
  ```

- **Undo commit (keep changes)**:

  ```bash
  git reset --soft HEAD~1
  ```

- **Undo commit (delete changes)**:

  ```bash
  git reset --hard HEAD~1
  ```

- **Revert commit in shared branch**:

  ```bash
  git revert a1b2c3d
  ```

👉 `reset` = rewrite history (safe locally).
👉 `revert` = make new commit that undoes (safe in shared repos).

---

## 7️⃣ **Stash Work (Switch Quickly)**

💡 Pattern: _“Work in progress → urgent hotfix → stash & return later.”_

```bash
git stash        # save work
git checkout hotfix/fix-login
... work + commit + push ...
git checkout feature/login
git stash pop    # restore your WIP
```

👉 Saves partial work without committing junk.

---

## 8️⃣ **Release with Tags**

💡 Pattern: _“Mark production versions with tags.”_

```bash
git checkout main
git pull origin main
git tag -a v1.0.0 -m "Release version 1.0"
git push origin v1.0.0
```

👉 Tags = version markers.
✅ Used by CI/CD pipelines for deployments.

---

## 9️⃣ **Debugging a Bug (Git Bisect)**

💡 Pattern: _“Find the exact commit that introduced a bug.”_

```bash
git bisect start
git bisect bad HEAD
git bisect good v1.0

# Git checks out middle commit → you test & mark good/bad
git bisect good
git bisect bad
...
```

👉 Git pinpoints bad commit → you fix root cause.
✅ Very useful for regressions.

---

## 🔟 **Collaboration Best Practice (PR Workflow)**

1. Create feature branch → push → PR.
2. Rebase before merging.
3. Squash commits.
4. Tag release after merge.

This is the **GitHub Flow / Azure DevOps Flow** → used in **all modern companies**.

---

## 📊 Visual Git Flow

```mermaid
gitGraph
   commit id: "Init"
   branch develop
   commit id: "Base"
   branch feature/login
   commit id: "Login UI"
   commit id: "Login API"
   checkout develop
   merge feature/login id: "Merge feature/login"
   branch hotfix/urgent
   commit id: "Fix prod bug"
   checkout develop
   merge hotfix/urgent id: "Merge hotfix"
   checkout main
   merge develop id: "Release"
   tag v1.0.0
```

---

## ✅ TL;DR

- **Daily Workflow** → `feature branch → PR → rebase → merge`.
- **Hotfixes** → small urgent branches, merge + tag.
- **Clean history** → squash & rebase.
- **Safe undo** → revert for shared, reset for local.
- **Stash** → pause & resume work.
- **Tags** → mark production releases.
- **Bisect** → debugging regressions.
