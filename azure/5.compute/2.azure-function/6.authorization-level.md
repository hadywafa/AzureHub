# 🔑 **Authorization Level in Azure Functions**

## ⁉️ **What It Is**

- When you create a function with an **HTTP trigger**, you must set its `authLevel`.
- This tells Azure **how secure the function endpoint should be**.
- The level determines if the caller needs:

  - **No key** (open to the world 🌍)
  - **A function key** (shared secret per function or app 🔑)
  - **An admin key** (full access to everything in the app 👑)

---

## 🎭 **Available Levels**

| **Level**     | **Description**                                                                                         | **When to Use**                            |
| ------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| **Anonymous** | Anyone can call the function — no key required and it is (**Read-only**).                                                         | Public endpoints, testing, open APIs.      |
| **Function**  | Requires a **function key** (either specific to the function or the whole app).                         | Internal apps, partner APIs.               |
| **Admin**     | Requires a **master key** (host-level). Provides full access, including admin APIs.                     | Management tasks, very rare in normal use. |
| **System**  | Used by **Azure platform** for system-managed calls (e.g., Event Grid). Not meant for external callers. | Internal system integrations only.         |

---

## 🎯 **Where It Appears**

### 🟦 In `function.json` (for JS/Python, etc.)

```json
{
  "bindings": [
    {
      "type": "httpTrigger",
      "authLevel": "function",
      "direction": "in",
      "methods": ["get", "post"],
      "name": "req"
    },
    {
      "type": "http",
      "direction": "out",
      "name": "$return"
    }
  ]
}
```

### 🟦 In C# (attributes)

```csharp
[Function("MyFunction")]
public async Task<HttpResponseData> Run(
    [HttpTrigger(AuthorizationLevel.Function, "get", "post")] HttpRequestData req)
{
    // Function code
}
```

---

## ✍🏻 **Example URLs**

Suppose your Function App is at:

```ini
https://myapp.azurewebsites.net
```

- **Anonymous**:
  👉 `https://myapp.azurewebsites.net/api/MyFunction`
  Works with no key.

- **Function**:
  👉 `https://myapp.azurewebsites.net/api/MyFunction?code=<function_key>`
  Caller must include the `code` query param (or `x-functions-key` header).

- **Admin**:
  👉 `https://myapp.azurewebsites.net/admin/functions/MyFunction?code=<master_key>`
  Master key unlocks **all functions** in the app.

---

## 🤔 **Where Keys Are Found**

- In **Azure Portal** → Function App → _Functions_ → _Function Keys_ tab.
- You get:

  - **Function keys** (per function)
  - **Default function key** (shared across all)
  - **Host keys** (admin-level)

---

## ✅ **Best Practices**

- ✅ Use **Anonymous** only for public APIs where security is handled elsewhere (e.g., via API Management, JWT, OAuth).
- ✅ Use **Function** for most real-world cases — gives you a secret key per function.
- ✅ Use **Admin** only for internal/admin operations.
- 🚫 Don’t commit keys into code or Git repos — store them in **Azure Key Vault** or **App Settings**.
- 🔒 Combine with **App Service Authentication / AAD auth** if you need strong identity-based access.

---

## 🏁 **Quick Analogy**

Think of your Function App like a **building**:

- **Anonymous** = doors wide open 🏠
- **Function** = keypad lock, code shared with guests 🔑
- **Admin** = master key, works on every door 👑
- **System** = janitor’s pass, used by the building itself 🛠️
