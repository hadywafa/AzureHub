# â˜ï¸ Azure Managed vs Unmanaged Disks

> ğŸ’¡ Both store your **VM OS + data**, but differ in **who manages the storage account** â€” **you** or **Azure**.

---

## 1ï¸âƒ£ What is an **Unmanaged Disk**?

**Think:** â€œYou manage everything yourself.â€ ğŸ§°

This is the **old-school** way (pre-2017).

### ğŸ§© How it works:

- Each disk (OS or data) is actually a **VHD file** stored in your own **Storage Account** inside Azure Blob Storage (`.vhd` in a container).
- You must **create and manage** that storage account yourself.
- Youâ€™re responsible for:

  - Storage capacity limits (max 20,000 IOPS or 50 TB per storage account).
  - Balancing disks across accounts (to avoid throttling).
  - Monitoring performance and redundancy.

### ğŸ§  Analogy:

> Itâ€™s like parking your car (VHD) in a garage (storage account) that _you_ own â€”
> you handle space, cleaning, and organization.

---

## 2ï¸âƒ£ What is a **Managed Disk**?

**Think:** â€œAzure handles the garage for you.â€ ğŸ¤–

This is the **modern**, **default** option for all new VMs.

### ğŸ§© How it works:

- Azure automatically creates and manages the **storage accounts** that host your disks.
- Each disk is a **first-class Azure resource** (visible in the portal).
- You donâ€™t deal with containers or `.vhd` paths anymore.
- Azure ensures:

  - High availability & load balancing
  - Scalability
  - Automatic placement across fault domains
  - Easy snapshots, backups, encryption, and role-based access

### ğŸ§  Analogy:

> You just tell Azure, â€œGive me a 128 GB Premium SSD,â€ and Azure takes care of _where_ and _how_ itâ€™s stored.
> You donâ€™t see the storage account anymore â€” Azure hides that layer.

---

## âš”ï¸ Key Comparison Table

| Feature                  | **Unmanaged Disk**                               | **Managed Disk**                             |
| ------------------------ | ------------------------------------------------ | -------------------------------------------- |
| ğŸ—ï¸ Storage Account       | You create and manage it                         | Azure manages automatically                  |
| ğŸ“‚ Disk Location         | Blob (`.vhd`) in your Storage Account            | Abstracted (Azure-managed resource)          |
| âš™ï¸ Scalability           | Limited by storage account IOPS (20,000)         | Virtually unlimited                          |
| ğŸ§¾ Billing               | Pay for storage account capacity                 | Pay per disk size                            |
| ğŸ” Snapshots / Backup    | Manual scripts                                   | Native feature                               |
| ğŸ”’ Security (Encryption) | Manual configuration                             | Built-in SSE + CMK supported                 |
| â˜ï¸ Availability          | You manage redundancy                            | Azure distributes across zones/fault domains |
| ğŸ§© Integration           | Older model (classic VMs)                        | Required for ARM (modern VMs)                |
| ğŸš€ Performance           | Can be throttled if many disks share one account | Azure optimizes placement automatically      |
| ğŸ§  Best Use              | Legacy setups only                               | Default choice today                         |

---

## ğŸ§­ How Azure Handles Them Under the Hood

```mermaid
---
config:
  look: handDrawn
  theme: dark
title: "Managed vs Unmanaged Disk Architecture"
---
flowchart TD
    subgraph Unmanaged["ğŸ§° Unmanaged Disk Setup"]
        VM1[(VM)]
        VM1 --> VHD1["VHD File"]
        VHD1 --> SA["User Storage Account"]
    end

    subgraph Managed["ğŸ¤– Managed Disk Setup"]
        VM2[(VM)]
        VM2 --> MD["Azure Managed Disk (resource)"]
        MD -->|Hidden| MS["Azure-Managed Storage Infrastructure"]
    end

    classDef c1 fill:#99ffa5,stroke:#333,color:#111;
    classDef store fill:#f9f,stroke:#333,color:#111;
    class VM1,VM2 c1
    class VHD1,SA,MD,MS store
```

---

## ğŸ§© Modern Features Only for Managed Disks

| Feature              | Available? | Why                                          |
| -------------------- | ---------- | -------------------------------------------- |
| Snapshots            | âœ… Yes     | Managed resource supports instant snapshots  |
| Shared Disks         | âœ… Yes     | For clustering (SQL FCI, WSFC)               |
| Disk Encryption Sets | âœ… Yes     | Managed disks integrate with Azure Key Vault |
| Zone Redundancy      | âœ… Yes     | Replicated across zones                      |
| Automatic Placement  | âœ… Yes     | Azure optimizes placement in the backend     |
| Scale                | âœ… Yes     | No storage account bottleneck                |
| ARM Support          | âœ… Yes     | Needed for all Resource Manager VMs          |

---

## ğŸ¯ Exam/Interview Mnemonic

> ğŸ’¬ **â€œManaged = Microsoft-managed; Unmanaged = User-managed.â€**

âœ… **Always choose Managed Disks** in real life and exams unless the question says:

> â€œYou must use existing `.vhd` files stored in Blob storage.â€

Thatâ€™s the only time youâ€™d choose Unmanaged.

---

## ğŸ’¡ Summary

| Term           | Meaning                                  | Who Manages Storage? | Used In              |
| -------------- | ---------------------------------------- | -------------------- | -------------------- |
| Managed Disk   | Azure-managed storage, simpler, scalable | Azure                | Modern (ARM) VMs     |
| Unmanaged Disk | Your own storage account & VHD           | You                  | Legacy (Classic) VMs |
