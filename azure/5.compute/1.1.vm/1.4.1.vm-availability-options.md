# â˜ï¸ Azure VM Availability & Redundancy

In AWS, youâ€™re used to terms like:

- **AZ (Availability Zone)** for fault isolation
- **Auto Scaling Group (ASG)** for redundancy
- **Placement Group (Cluster)** for low latency

In Azure, itâ€™s a bit differentâ€”but donâ€™t worry, hereâ€™s your **complete breakdown** with AWS equivalents, diagrams, and real use cases.

---

<div align="center">
  <img src="images/vm-availability-options.png" alt="Azure VM Availability Options" style="width: 40%; border-radius: 10px;">
</div>

---

## ğŸ“Œ TL;DR â€“ Azure Availability Options vs AWS

| Azure Option                     | Purpose                                     | AWS Equivalent           |
| -------------------------------- | ------------------------------------------- | ------------------------ |
| âŒ No infrastructure redundancy  | Single VM only                              | EC2 in 1 AZ (no ASG)     |
| ğŸ§± **Availability Set**          | Fault + update domain separation (same DC)  | ASG in 1 AZ w/ spread    |
| ğŸ—ï¸ **Availability Zone (AZ)**    | Zone-level isolation                        | Run EC2s across AZs      |
| ğŸ“ˆ **Virtual Machine Scale Set** | Auto-scaling group w/ zone+app redundancy   | Auto Scaling Group       |
| ğŸ“ **Proximity Placement Group** | Low-latency placement in same hardware rack | EC2 Cluster Placement GP |

---

## 1ï¸âƒ£ Option 1: **No Infrastructure Redundancy**

This means: **"I donâ€™t care if the VM is single-instance"**

- This option **places your VM in a single data center**.
- No HA guarantee. If that data center goes down, your VM goes down too.

> ğŸ”¥ Use only for **dev/test**, low-priority workloads, or when app-layer handles redundancy.

â¡ï¸ AWS Equivalent: EC2 in **a single AZ**, no ELB, no ASG.

---

## 2ï¸âƒ£ Option 2: **Availability Set** (Legacy but still useful)

An **Availability Set** is a logical group that spreads your VMs across:

| Concept                | Description                                                             |
| ---------------------- | ----------------------------------------------------------------------- |
| **Fault Domain (FD)**  | Represents a rack of hardware (power + network isolated) (**max 3 FD**) |
| **Update Domain (UD)** | Logical batch for OS/host updates (only one UD updates at a time)       |

> You define an availability set, and Azure handles **spreading** your VMs across multiple FDs and UDs.

### ğŸ“Š Default:

- **FDs**: up to 3
- **UDs**: up to 20

### ğŸ’¡ Use Case:

- You want **2+ VMs running the same app** on separate physical hosts for **high availability** in a single region.

### ğŸ§  Why It Matters:

- Azure ensures VMs in an Availability Set **donâ€™t reside in the same FD or UD**.
- Helps protect against both **hardware failures** and **planned updates**.

> âš ï¸ Availability Sets are **only within a single Azure region and data center (no zone awareness)**.

â¡ï¸ AWS Equivalent:

- **Fault Domain â‰ˆ EC2 AZ** (kind of)
- **Update Domain â‰ˆ Rolling update batch in ASG**
- But thereâ€™s **no exact AWS match** to this combo
- Similar to **spreading EC2 instances across racks** inside a single AZ using **spread placement group**.

---

## 3ï¸âƒ£ Option 3: **Availability Zones (AZs)**

An **Availability Zone** is a physically separate data center within an Azure region.

- Each **region typically has 3 AZs** (Zone 1, Zone 2, Zone 3)
- They are **isolated**, but connected with low-latency links
- Azure SLA guarantees **99.99% uptime** if you place VMs across zones

> âœ… Best for high-availability, mission-critical apps.

â¡ï¸ AWS Equivalent: **Availability Zones** in AWS

---

## 4ï¸âƒ£ Option 4: **Virtual Machine Scale Set (VMSS)**

**VMSS = Auto-scaling fleet of identical VMs!**

- Supports **autoscaling**, **load balancing**, **zonal or regional distribution**
- Can be **zone-aware** (spread across AZs)
- Fully managed orchestration

> ğŸ› ï¸ VMSS + Load Balancer = Easy HA + elasticity

â¡ï¸ AWS Equivalent: **EC2 Auto Scaling Group**

---

## 5ï¸âƒ£ **Proximity Placement Groups (PPG)**

> When **latency really matters** (like HPC, SAP, or tightly-coupled services)

A **Proximity Placement Group (PPG)** ensures:

- All your VMs or VMs + databases are **physically close** to reduce latency
- Same data center or even same rack

> ğŸ§  PPG is **not** about availability â€” it's about **low latency**

â¡ï¸ AWS Equivalent: **Placement Group (cluster strategy)**

---

## âœ… When to Use What?

| Scenario                      | Best Option                  |
| ----------------------------- | ---------------------------- |
| ğŸ§ª Dev/test VM, low HA needed | âŒ No Redundancy             |
| ğŸ§± Basic HA in 1 AZ           | âœ… Availability Set          |
| ğŸŒ HA across DCs              | âœ… Availability Zones        |
| ğŸ“ˆ Autoscaling & zone HA      | âœ… VMSS w/ AZs               |
| âš¡ HPC or real-time latency   | âœ… PPG + Manual Zone Control |

---

## ğŸ“ Final Notes for AWS Users

| Azure Concept             | AWS Equivalent              |
| ------------------------- | --------------------------- |
| Availability Zone         | AZ (us-east-1a, etc.)       |
| Availability Set          | Spread Placement Group      |
| VMSS                      | Auto Scaling Group          |
| Load Balancer (Azure LB)  | ELB (ALB/NLB)               |
| Proximity Placement Group | EC2 Cluster Placement Group |

> Azure mixes **redundancy + placement + scaling** differently than AWS, so you often combine **VMSS + AZ + NSG + Load Balancer** to achieve best results.
