# ğŸŒ Developing Static Websites on Azure

## ğŸ›‘ **Problem** â€“ Why Static Website Hosting?

You want to host a **lightweight, cost-effective website** (HTML, CSS, JS, images) without managing VMs, IIS, or App Service.
Examples:

- ğŸ‘¨â€ğŸ’» Portfolio site
- ğŸš€ Product landing page
- ğŸ“– Documentation site
- ğŸ–¼ï¸ Frontend-only apps that talk to APIs

> ğŸ”¹ Traditional hosting = **overkill & expensive**.  
> ğŸ”¹ Solution â†’ **Azure Blob Storage** with Static Website Hosting.

---

## âœ… **Solution: Static Website Feature in Blob Storage**

- Use a special container called **`$web`**.
- Upload your files â†’ instantly hosted via `https://<storageaccount>.z*.web.core.windows.net/`.
- No servers, no OS patching, no scaling issues.
- Integrates with **Azure CDN, Front Door, Functions** for advanced scenarios.

---

## ğŸ–¼ **Architecture Overview**

```mermaid
flowchart LR
    User[ğŸŒ Browser] --> CDN[Azure CDN/Front Door ğŸŒ]
    CDN --> Storage[$web Container in Blob Storage]
    Storage --> Files[Static Files: index.html, CSS, JS, Images]
    Files --> Response[HTTP Response]
```

ğŸ‘‰ Your users hit a CDN/endpoint â†’ CDN fetches from Blob Storage â†’ website is served.

---

## âš¡ **Benefits**

- **Super Cheap** â€“ pay for storage + bandwidth only.
- **Scales automatically** â€“ no infra management.
- **Custom Domains** â€“ map `www.mysite.com` to Blob endpoint.
- **Serverless Friendly** â€“ add **Azure Functions** as backend if needed.

---

## âš ï¸ **Limitations**

- âŒ **No custom headers** (CSP, cache control) â†’ use **Azure CDN** as workaround.
- âŒ **No built-in auth** â†’ integrate with **Entra ID, Functions, or API Management**.

---

## ğŸªœ **Step-by-Step Setup**

### 1ï¸âƒ£ Enable Static Website

1. Go to your **Storage Account** in Azure Portal.
2. Find **Static website** (under _Data Management_).
3. Click **Enable**.
4. Enter:

   - `index.html` (default page).
   - `error.html` (optional).
     ğŸ‘‰ This creates a **`$web` container** automatically.

<div align="left">
  <img src="images/1758562746448.png" alt="Azure Blob Storage Lifecycle Management" style="width: 60%; border-radius: 10px;border: 2px solid white;margin:0 30px">
</div>

---

### 2ï¸âƒ£ Configure Container Access

- Go to **Containers** â†’ **\$web**.
- Change **Access level** â†’ `Blob` (so anonymous users can read files).

<div align="left">
  <img src="images/1758562830256.png" alt="Azure Blob Storage Lifecycle Management" style="width: 60%; border-radius: 10px;border: 2px solid white;margin:0 30px">
</div>

---

### 3ï¸âƒ£ Upload Your Website Files

Options:

- **Azure Portal** â†’ click _Upload_.
- **Azure Storage Explorer** (desktop tool).
- **AzCopy CLI** (recommended for bulk).

<div align="left">
  <img src="images/1758562866984.png" alt="Azure Blob Storage Lifecycle Management" style="width: 60%; border-radius: 10px;border: 2px solid white;margin:0 30px">
</div>

Example with AzCopy:

```bash
azcopy copy "web-template/" "https://<account>.blob.core.windows.net/\$web" --recursive
```

ğŸ‘‰ Remember: escape `$` as `\$web`.

---

### 4ï¸âƒ£ Verify Website

- Go to **index.html blob â†’ Properties â†’ URL**.
- Example:

  ```ini
  https://az204demo.blob.core.windows.net/$web/index.html
  ```

- Open in browser â†’ ğŸ‰ Website is live.

> ğŸš¨ Fix Subdirectory Issues:  
> If your files get nested like `.../$web/web-template/index.html`:
>
> ```bash
> azcopy copy "web-template/" "https://<account>.blob.core.windows.net/\$web" --recursive --as-subdir=false
> ```

---

### 5ï¸âƒ£ Map Custom Domain

- Add **CNAME record** in your DNS:

  ```ini
  www.mysite.com â†’ <account>.z13.web.core.windows.net
  ```

- Optionally add **Azure Front Door / CDN** for global caching + HTTPS.

<div align="left">
  <img src="images/1758562924015.png" alt="Azure Blob Storage Lifecycle Management" style="width: 60%; border-radius: 10px;border: 2px solid white;margin:0 30px">
</div>

---

## ğŸ“š **Pro Tips**

- ğŸ Use **Azure CDN** â†’ solve caching + headers.
- ğŸ”’ Use **Private Endpoints** if website is internal-only.
- âš™ï¸ Automate uploads in CI/CD with:

  ```yaml
  - task: AzureCLI@2
    inputs:
      scriptType: bash
      scriptLocation: inlineScript
      inlineScript: |
        azcopy copy "dist/" "https://<account>.blob.core.windows.net/\$web" --recursive --as-subdir=false
  ```

- ğŸ¯ Perfect for JAMStack apps (React/Angular frontend in Blob, API via Functions).

---

## ğŸ–¥ **Example:** Static Website + Serverless Backend

- **Frontend** = HTML/CSS/JS in Blob Storage.
- **Backend** = Azure Functions (handles forms, payments, etc.).

---

<div align="center">

```mermaid
flowchart LR
    User[ğŸ‘©â€ğŸ’» User Browser] --> Blob[$web Container: Static Site]
    User --> Func[âš¡ Azure Function Backend]
    Func --> DB[(Azure Cosmos DB)]
```

</div>

---

## ğŸ”‘ **Key Takeaway**

- **Static Website in Blob** = cheapest + simplest way to host frontends.
- Best for **content-heavy sites, portfolios, product pages, SPAs**.
- Add **Functions + CDN + Auth** when you need **dynamic power**.
