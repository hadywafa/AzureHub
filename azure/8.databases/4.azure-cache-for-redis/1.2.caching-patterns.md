# ğŸš€ **Caching Patterns**

Caching is about **speed vs. freshness**.
ğŸ‘‰ Instead of hitting the **slow database** every time, we keep a **copy of data in cache** (fast memory).
But _how_ we sync cache with DB = caching pattern.

---

## 1ï¸âƒ£ Cache-Aside (a.k.a Lazy Loading) ğŸ’¤

**How it works:**

- App checks cache first.
- If **miss**, fetch from DB â†’ store in cache â†’ return.
- Writes: update DB + clear cache/update cache.

- **Cache-Aside For Read:**

<div align="left">
  <img src="image/1.2.caching-patterns/cache-aside-read-1.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

- **Cache-Aside For Write:**

<div align="left">
  <img src="image//1.2.caching-patterns/cache-aside-write-1.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

> âœ… Simple, everyone understands it.  
> âŒ Risk: DB and cache can get **out of sync** (if one fails).

ğŸ‘‰ Think: _â€œIf itâ€™s not in my fridge, Iâ€™ll go to the store and then put it in the fridge for next time.â€_ ğŸ›’

---

## 2ï¸âƒ£ Read-Through ğŸ“–

**How it works:**

- App only talks to cache.
- Cache knows how to fetch from DB if needed.

<div align="left">
  <img src="image/1.2.caching-patterns/read-through.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

> âœ… Cleaner code â†’ app doesnâ€™t care about DB.  
> âŒ Requires a **smarter cache provider**.

ğŸ‘‰ Think: _â€œI always ask my assistant (cache). If they donâ€™t know, theyâ€™ll go check the store (DB).â€_ ğŸ¤µ

---

## 3ï¸âƒ£ Write-Through âœï¸

**How it works:**

- App writes to **cache only**.
- Cache writes to DB **synchronously**.

<div align="left">
  <img src="image/1.2.caching-patterns/write-through.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

> âœ… Always in sync, app code is simpler.  
> âŒ Slower writes (waiting for DB).

ğŸ‘‰ Think: _â€œWhen I tell my assistant to buy milk, they instantly note it in the fridge (cache) AND the pantry list (DB).â€_ ğŸ¥›

---

## 4ï¸âƒ£ Write-Behind (a.k.a Write-Back) â³

**How it works:**

- App writes to cache.
- Cache writes to DB **later (async)**.

<div align="left">
  <img src="image/1.2.caching-patterns/write-behind.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

> âœ… Super fast writes ğŸš€.  
> âŒ Risk of **data loss/inconsistency** if cache crashes before writing DB.

ğŸ‘‰ Think: _â€œI told my assistant to add milk to the pantry list later. Hopefully they donâ€™t forget.â€_ ğŸ˜…

---

## 5ï¸âƒ£ Refresh-Ahead ğŸ”„

**How it works:**

- Cache refreshes items **before they expire**.
- Users always see fresh(ish) data.

<div align="left">
  <img src="image/1.2.caching-patterns/refresh-ahead.svg" alt="Capture Configuration" style="border-radius: 10px; border: 2px solid white; width: 60%;margin:0 30px; background-color: #ffffffff">
</div>

> âœ… Reduces cache misses.  
> âŒ More complexity (extra jobs to refresh).

ğŸ‘‰ Think: _â€œMy assistant restocks the fridge before I run out, so I never notice.â€_ ğŸ

---

## ğŸ§  Easy Way to Memorize (Fun Mnemonic)

- **ğŸ’¤ Cache-Aside** â†’ _Lazy loading fridge_ â†’ â€œIâ€™ll get it if I donâ€™t have it.â€
- **ğŸ“– Read-Through** â†’ _Smart assistant_ â†’ â€œAsk cache, it fetches if needed.â€
- **âœï¸ Write-Through** â†’ _Double write immediately_ â†’ â€œCache + DB always updated together.â€
- **â³ Write-Behind** â†’ _Write later_ â†’ â€œCache first, DB later (async).â€
- **ğŸ”„ Refresh-Ahead** â†’ _Auto restock_ â†’ â€œCache refreshes before it expires.â€

---

## ğŸ“š **References**

- [A Hitchhikerâ€™s Guide to Caching Patterns](https://hazelcast.com/blog/a-hitchhikers-guide-to-caching-patterns/)
