# üé≠ Mastering the 3 Faces of RBAC in Azure

> üß† Understand the differences, use cases, and cloud-native behavior of:

- üîê Microsoft Entra RBAC
- ‚òÅÔ∏è Azure RBAC
- üßë‚Äçüíª Application RBAC
  With real-life examples, smart visuals, and AWS comparisons!

---

## üåü The Big Picture

RBAC = **Role-Based Access Control** ‚Äî but **"RBAC" in Azure isn‚Äôt one system**.

You‚Äôll encounter **3 types** depending on **what you‚Äôre trying to control**:

| RBAC Type      | Governs...                        | Roles Affect...                    | Enforced By        |
| -------------- | --------------------------------- | ---------------------------------- | ------------------ |
| **Entra RBAC** | Microsoft Entra (tenant/identity) | Directory roles & policies         | Entra backend      |
| **Azure RBAC** | Azure resources (infra/data)      | Access to Azure subscriptions, VMs | Azure Resource Mgr |
| **App RBAC**   | Your application logic            | Features like admin-only views     | Your app logic     |

---

## üîê 1. Microsoft Entra RBAC (Directory Roles)

> Controls access to **identity-related tasks** in your tenant

üß© Examples:

- Global Admin can reset all passwords
- Groups Administrator can manage security groups
- User Administrator can create/delete users

‚úÖ Used in:

- **Entra ID Portal** (`entra.microsoft.com`)
- Managing users, devices, MFA, licenses, etc.

üß† **Applies to tenant-wide operations** ‚Äî not cloud resources!

| Feature          | Value                                                                |
| ---------------- | -------------------------------------------------------------------- |
| Roles Defined By | Microsoft                                                            |
| Scope            | **Tenant-level only**                                                |
| Assignable To    | Users & Groups                                                       |
| Example Role     | `Global Administrator`, `User Admin`                                 |
| AWS Comparison   | Kinda like **IAM AdminAccess**, but only for **identity** operations |

---

## ‚òÅÔ∏è 2. Azure RBAC (Resource Roles)

> Controls access to **Azure resources** like VMs, Storage, Key Vault, etc.

üß© Examples:

- Contributor on a VM = can restart the VM
- Reader on a Storage Account = can view blob metadata
- Custom role = only allow starting VMs, nothing else

‚úÖ Used in:

- **Azure Portal** (`portal.azure.com`)
- CLI/ARM/Bicep templates

üß† This is what most engineers think of when they hear ‚ÄúRBAC‚Äù in Azure.

| Feature         | Value                                                        |
| --------------- | ------------------------------------------------------------ |
| Role Assignment | `Principal + Role + Scope`                                   |
| Scope Levels    | Management Group > Subscription > RG > Resource              |
| Assignable To   | Users, Groups, SPNs, Managed Identities                      |
| Role Types      | Built-in / Custom                                            |
| AWS Comparison  | Exactly like **IAM Identity-Based Policy** on resource scope |

üîç **No "Deny" like in AWS**. Azure RBAC is **deny-by-default**, but **no inline Deny override**.

---

## üßë‚Äçüíª 3. App RBAC (Application Role-Based Access)

> Controls access **inside your app**, not Azure.

üß© Examples:

- Only users with `Admin` role can access `/admin-dashboard`
- A reviewer role can only see draft submissions
- Roles appear in the user‚Äôs **JWT access token**

‚úÖ Used in:

- Your own SaaS applications
- OAuth2 / OIDC integrations via Entra ID

üß† Token looks like this:

```json
{
  "name": "Jane Doe",
  "roles": ["Admin"]
}
```

| Feature           | Value                                         |
| ----------------- | --------------------------------------------- |
| Role Defined In   | App Manifest (`appRoles`)                     |
| Roles Assigned In | Enterprise Applications > Users & Groups      |
| Enforced By       | Your App (backend code)                       |
| AWS Comparison    | Similar to **Cognito User Pool Groups/Roles** |

---

## üß† Visual Summary

```mermaid
graph TD
  A[User or App] -->|Signs in| B(Entra ID)
  B -->|RBAC| C[Directory Access (Entra RBAC)]
  B -->|Token Issued| D[Azure Resource Access (Azure RBAC)]
  B -->|Token Issued with 'roles'| E[App RBAC Logic]
```

---

## üîÑ Azure RBAC vs Entra RBAC vs App RBAC

| Feature        | Entra RBAC             | Azure RBAC                     | App RBAC                         |
| -------------- | ---------------------- | ------------------------------ | -------------------------------- |
| Governs        | Directory & identity   | Azure resources                | App-specific behavior            |
| Scope          | Tenant-wide            | Hierarchical (Sub/RG/Resource) | Application-level only           |
| Roles          | Fixed roles (e.g., GA) | Built-in or Custom             | Defined in `appRoles`            |
| Assignable To  | Users, Groups          | Users, Groups, SPN, MSI        | Users, Groups via Enterprise App |
| Token Usage    | ‚ùå Not in token        | ‚ùå Not in token                | ‚úÖ `roles` claim in token        |
| Enforced By    | Microsoft Entra        | Azure Resource Manager         | Your App Backend                 |
| AWS Comparison | IAM console perms      | IAM Role/Policy on resource    | Cognito Group or OIDC claim      |

---

## üß† Final Analogy (Human-style)

| Scenario                         | Which RBAC?    | Explanation                                             |
| -------------------------------- | -------------- | ------------------------------------------------------- |
| Ahmed can reset user passwords   | **Entra RBAC** | Governing the identity system ‚Äî tenant-wide power       |
| Hady can manage VMs in `ProdRG`  | **Azure RBAC** | Azure infrastructure authorization (like AWS IAM + EC2) |
| Sara sees Admin Dashboard in app | **App RBAC**   | Controlled by your app logic based on token roles       |

---

## ‚úÖ TL;DR for Busy Engineers

- Azure has **3 types of RBAC** ‚Äî don‚Äôt mix them!
- ‚úÖ **Azure RBAC** ‚Üí Resource access (VM, Storage, Key Vault, etc.)
- ‚úÖ **Entra RBAC** ‚Üí Identity/Directory access (users, groups, devices)
- ‚úÖ **App RBAC** ‚Üí App-specific roles (used by your app‚Äôs logic)
- **AWS IAM = mostly like Azure RBAC**, but with inline JSON policies
- **Cognito** = closest match to App RBAC + Entra B2C
