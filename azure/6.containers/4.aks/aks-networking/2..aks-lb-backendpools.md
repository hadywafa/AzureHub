# AKS lb backend pools

## ðŸ§  First: what a Backend Pool REALLY is (simple definition)

> **A backend pool is just a logical group of NICs/IPs that a specific load-balancer rule sends traffic to.**

ðŸ”‘ **Backend pools do NOT mean different machines**

- They are **groups for different purposes**
- **The same node can appear in multiple backend pools**

Thatâ€™s exactly what youâ€™re seeing.

---

![1766155766633](image/aks-lb-backendpools/1766155766633.png)

---

## ðŸ‘€ What you are seeing in your screenshot

You have **2 AKS nodes**:

- `10.0.0.5` â†’ worker
- `10.0.0.6` â†’ master/system

But you see **TWO backend pools**:

1. **`aksOutboundBackendPool`**
2. **`kubernetes`**

And **both pools contain the same two nodes**

ðŸ‘‰ This is **100% normal**

---

## ðŸ”¹ Backend Pool #1: `aksOutboundBackendPool`

![1766155990203](image/aks-lb-backendpools/1766155990203.png)

---

### What is it for?

ðŸ‘‰ **OUTBOUND traffic (SNAT to internet)**

This pool is used when:

- Pods or nodes access:

  - Internet
  - External APIs
  - Docker registries
  - Azure services (public endpoints)

### Traffic flow

```text
Pod â†’ Node â†’ Load Balancer â†’ Internet
```

The Load Balancer:

- Takes traffic from **this backend pool**
- SNATs it
- Sends it out via the LB public IP

### Key point

> This pool exists **even if you expose ZERO applications**

Thatâ€™s why it always exists.

---

## ðŸ”¹ Backend Pool #2: `kubernetes`

### What is it for?

ðŸ‘‰ **INBOUND traffic (services of type LoadBalancer)**

This pool is used when:

- You create a Kubernetes Service:

```yaml
type: LoadBalancer
```

Azure then:

- Adds an inbound rule
- Uses the **`kubernetes` backend pool**
- Sends traffic to nodes
- kube-proxy forwards traffic to pods

### Important observation from your screenshot

| Column      | Value |
| ----------- | ----- |
| Rules count | `0`   |

ðŸ”‘ That means:

> **You currently have NO LoadBalancer services exposed**

So this pool exists, but is not actively used yet.

---

## â“ â€œWhy do both backend pools have the same nodes?â€

Because:

âœ” The **same nodes**:

- Send outbound traffic
- Receive inbound traffic

âœ” Azure Load Balancer separates traffic by **purpose**, not by machine

Think of it like this:

```text
Same Nodes
 â”œâ”€â”€ Outbound traffic â†’ aksOutboundBackendPool
 â””â”€â”€ Inbound traffic  â†’ kubernetes backend pool
```

---

## ðŸ§© Very important mental model (memorize this)

> **Backend pools are not clusters of machines â€” they are traffic targets for specific LB rules.**

Same VM
âœ” can be in 1 pool
âœ” can be in 5 pools
âœ” can be in 10 pools

It depends on **how many traffic flows exist**.

---

## ðŸ§ª Real-world analogy (easy)

Imagine a company building:

| Concept        | Azure LB Equivalent   |
| -------------- | --------------------- |
| Same employees | AKS nodes             |
| Exit door      | Outbound backend pool |
| Reception door | Inbound backend pool  |
| Security rules | LB rules              |

Same people, **different doors**, different rules.

---

## ðŸ” Why you see â€œ2 nodes per poolâ€

Because:

- Your cluster has **2 nodes**
- Both nodes must:

  - Send outbound traffic
  - Be able to receive inbound traffic

So Azure adds **both NICs to both pools**.

---

## âš ï¸ Important beginner warning

âŒ Do NOT:

- Delete backend pools
- Remove NICs manually
- Modify rules directly

AKS **reconciles** these resources and will break or recreate them.

---

## ðŸ§  One-line summary (this will click)

> **AKS creates multiple backend pools on the same Load Balancer because inbound and outbound traffic are handled separately, even though they use the same nodes.**

---

If you want next, I can:

- Explain **Outbound rules vs Load balancing rules**
- Show what happens **when you create a Service: LoadBalancer**
- Explain **how Ingress Controller fits into this**

Just tell me ðŸ‘Œ
