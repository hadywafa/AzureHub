# ğŸ¯ **Filtering Events in Azure Event Grid**

Event Grid doesnâ€™t just blast **all events** to subscribers â€” it gives you **filters** so you only receive what you care about.
This makes your event-driven architecture **efficient, cheaper, and easier to manage**.

---

## ğŸ› ï¸ **Types of Filters**

Event Grid provides several filtering options when creating a subscription:

---

### 1. **ğŸ·ï¸ Event Type Filtering**

- Choose which event types you want (out of all possible from a publisher).
- Example:

  - Storage emits: `BlobCreated`, `BlobDeleted`, `BlobRenamed`.
  - You only care about `BlobCreated`.

ğŸ‘‰ So your subscriber wonâ€™t get spammed by delete/rename events.

---

### 2. **ğŸ“‚ Subject Filtering**

The **subject** is like the â€œpathâ€ of the resource inside the event.
You can filter based on:

- **Prefix match** â†’ Only events starting with `/containers/photos/`.
- **Suffix match** â†’ Only events ending with `.jpg`.

**ğŸ“Œ Example:**

- Rule: Prefix = `/containers/photos/`, Suffix = `.png`
- Result: You only get events for PNG files uploaded in the **photos container**.

---

### 3. **ğŸ§  Advanced Filters**

For more complex scenarios, you can apply **field-level filters**.
You can filter on event properties like:

- `data.api` (e.g., only `PutBlob`).
- `data.clientRequestId` (specific application).
- Numeric/string comparisons (`>`, `<`, `=`, `startsWith`, `endsWith`).

**ğŸ“Œ Example:**

```json
"advancedFilters": [
  {
    "key": "data.api",
    "operatorType": "StringEquals",
    "values": ["PutBlob"]
  }
]
```

This ensures only **upload operations** trigger your subscriber.

---

<div align="center" style="background-color: #ffffffff ;border-radius: 10px;border: 2px solid white">
  <img src="image/7.1.filtering-events/1758827774946.png" alt="Azure Event Grid" style="border-radius: 10px; border: 2px solid white; width: 60%">
</div>

---

<div align="center" style="background-color: #ffffffff ;border-radius: 10px;border: 2px solid white">
  <img src="image/7.1.filtering-events/1758827725938.png" alt="Azure Event Grid" style="border-radius: 10px; border: 2px solid white; width: 60%">
</div>

---

## ğŸ“Š **Visual Flow**

<div align="center" style="background-color: #1c2529ff ;border-radius: 10px;border: 2px solid white">

```mermaid
flowchart LR
    A[Event Grid Topic] -->|All Events| B[Filter Layer]
    B -->|BlobCreated only| C[Subscriber 1]
    B -->|BlobDeleted only| D[Subscriber 2]
    B -->|photos/*.png only| E[Subscriber 3]
```

</div>

---

## âš¡ **Hands-On Example (Portal Setup)**

1. Go to your **Event Subscription** in Azure Portal.
2. Under **Filters**, configure:

   - **Event Types** â†’ select only `BlobCreated`.
   - **Subject Filters** â†’ Prefix `/containers/photos/`, Suffix `.jpg`.
   - **Advanced Filters** â†’ `data.api = PutBlob`.

3. Save subscription â†’ Now your webhook/Function/Queue only gets the events you actually want.

---

## âœ… **Why Filtering Matters**

- **Performance** â†’ Subscribers donâ€™t waste CPU on unwanted events.
- **Cost** â†’ You arenâ€™t billed for processing/logic on events you donâ€™t need.
- **Simplicity** â†’ Business logic stays clean, less noisy data.

---

## ğŸ† **Summary**

- **Event Type filter** â†’ choose event kinds (e.g., only `BlobCreated`).
- **Subject filter** â†’ prefix/suffix matching (e.g., only photos/\*.png).
- **Advanced filter** â†’ fine-grained conditions on event payload (e.g., only `PutBlob`).

ğŸ‘‰ Filtering ensures subscribers see **only the signals, not the noise**.
